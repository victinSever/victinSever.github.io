{
    "version": "https://jsonfeed.org/version/1",
    "title": "Hexo",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2022/10/25/Canvas/%E7%BB%98%E5%88%B6%E6%97%B6%E9%92%9F/",
            "url": "http://example.com/2022/10/25/Canvas/%E7%BB%98%E5%88%B6%E6%97%B6%E9%92%9F/",
            "title": "canvas绘制时钟",
            "date_published": "2022-10-25T15:50:55.000Z",
            "content_html": "<h3 id=\"Canvas绘制时钟\"><a href=\"#Canvas绘制时钟\" class=\"headerlink\" title=\"Canvas绘制时钟\"></a>Canvas绘制时钟</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.clock</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">width</span>: <span class=\"number\">400px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">height</span>: <span class=\"number\">400px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">margin</span>: <span class=\"number\">100px</span> auto;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">border-radius</span>: <span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: skyblue;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">box-shadow</span>: <span class=\"number\">2px</span> <span class=\"number\">5px</span> <span class=\"number\">2px</span> <span class=\"built_in\">rgb</span>(<span class=\"number\">80</span>, <span class=\"number\">196</span>, <span class=\"number\">241</span>);</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;clock&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;400px&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;400px&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;canvas&quot;</span>&gt;</span></span><br><span class=\"line\">            您的浏览器版本过低，不支持canvas功能</span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> canvas = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;canvas&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> ctx = canvas.<span class=\"title function_\">getContext</span>(<span class=\"string\">&#x27;2d&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">// 定义变量</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> w = h = <span class=\"number\">400</span> <span class=\"comment\">//宽高</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> x = y = <span class=\"number\">200</span> <span class=\"comment\">//圆心</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> r = <span class=\"number\">180</span> <span class=\"comment\">//半径</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> r_h = <span class=\"number\">60</span>, r_m = <span class=\"number\">120</span>, r_s = <span class=\"number\">140</span> <span class=\"comment\">//时分秒针长度</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> r_t = <span class=\"number\">140</span> <span class=\"comment\">//文字半径</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> r_squ = <span class=\"number\">165</span> <span class=\"comment\">//刻度半径</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> r_c = <span class=\"number\">10</span> <span class=\"comment\">//表盘圆点</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> deg = <span class=\"title class_\">Math</span>.<span class=\"property\">PI</span> * <span class=\"number\">2</span> <span class=\"comment\">//圆周</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">// 平移中心点</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        ctx.<span class=\"title function_\">translate</span>(w / <span class=\"number\">2</span>, h / <span class=\"number\">2</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">clock</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"built_in\">setInterval</span>(<span class=\"function\">() =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"title function_\">clock</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;, <span class=\"number\">1000</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">function</span> <span class=\"title function_\">clock</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"comment\">// 画圆盘</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"title function_\">drawCircle</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, r, <span class=\"string\">&#x27;#fff&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"comment\">//画圆心</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"title function_\">drawCircle</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, r_c, <span class=\"string\">&#x27;#000&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"comment\">// 画指针</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">let</span> day = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">let</span> hour = day.<span class=\"title function_\">getHours</span>() % <span class=\"number\">12</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">let</span> minute = day.<span class=\"title function_\">getMinutes</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">let</span> second = day.<span class=\"title function_\">getSeconds</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">            hour = hour * deg / <span class=\"number\">12</span> - deg / <span class=\"number\">4</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            minute = minute * deg / <span class=\"number\">60</span> - deg / <span class=\"number\">4</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            second = second * deg / <span class=\"number\">60</span> - deg / <span class=\"number\">4</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"title function_\">drawLine</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, r_h * <span class=\"title class_\">Math</span>.<span class=\"title function_\">cos</span>(hour), r_h * <span class=\"title class_\">Math</span>.<span class=\"title function_\">sin</span>(hour), <span class=\"string\">&#x27;#000&#x27;</span>, <span class=\"number\">10</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"title function_\">drawLine</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, r_m * <span class=\"title class_\">Math</span>.<span class=\"title function_\">cos</span>(minute), r_m * <span class=\"title class_\">Math</span>.<span class=\"title function_\">sin</span>(minute), <span class=\"string\">&#x27;#000&#x27;</span>, <span class=\"number\">5</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"title function_\">drawLine</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, r_s * <span class=\"title class_\">Math</span>.<span class=\"title function_\">cos</span>(second), r_s * <span class=\"title class_\">Math</span>.<span class=\"title function_\">sin</span>(second), <span class=\"string\">&#x27;red&#x27;</span>, <span class=\"number\">2</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"comment\">//画数字</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt;= <span class=\"number\">12</span>; i++) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">let</span> t = (deg / <span class=\"number\">12</span>) * i - deg / <span class=\"number\">4</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">let</span> x = r_t * <span class=\"title class_\">Math</span>.<span class=\"title function_\">cos</span>(t)</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">let</span> y = r_t * <span class=\"title class_\">Math</span>.<span class=\"title function_\">sin</span>(t)</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"title function_\">drawText</span>(i, x, y)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"comment\">//画刻度</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt;= <span class=\"number\">60</span>; i++) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">let</span> t = (deg / <span class=\"number\">60</span>) * i</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">let</span> x1 = r * <span class=\"title class_\">Math</span>.<span class=\"title function_\">cos</span>(t)</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">let</span> y1 = r * <span class=\"title class_\">Math</span>.<span class=\"title function_\">sin</span>(t)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"comment\">//判断是否整点</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">if</span> (i % <span class=\"number\">5</span> === <span class=\"number\">0</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"keyword\">let</span> x2 = r_squ * <span class=\"title class_\">Math</span>.<span class=\"title function_\">cos</span>(t)</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"keyword\">let</span> y2 = r_squ * <span class=\"title class_\">Math</span>.<span class=\"title function_\">sin</span>(t)</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"title function_\">drawLine</span>(x1, y1, x2, y2, <span class=\"string\">&#x27;#999&#x27;</span>, <span class=\"number\">3</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">                &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"keyword\">let</span> x2 = (r_squ + <span class=\"number\">3</span>) * <span class=\"title class_\">Math</span>.<span class=\"title function_\">cos</span>(t)</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"keyword\">let</span> y2 = (r_squ + <span class=\"number\">3</span>) * <span class=\"title class_\">Math</span>.<span class=\"title function_\">sin</span>(t)</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"title function_\">drawLine</span>(x1, y1, x2, y2, <span class=\"string\">&#x27;#ddd&#x27;</span>, <span class=\"number\">2</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">                &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">// 画文字</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">function</span> <span class=\"title function_\">drawText</span>(<span class=\"params\">text, x, y, font = <span class=\"string\">&#x27;20px 微软雅黑&#x27;</span></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"property\">font</span> = font</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"property\">textAlign</span> = <span class=\"string\">&#x27;center&#x27;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"property\">textBaseline</span> = <span class=\"string\">&#x27;middle&#x27;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">fillText</span>(text, x, y)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//画圆</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">function</span> <span class=\"title function_\">drawCircle</span>(<span class=\"params\">x, y, r, color = <span class=\"string\">&#x27;#000&#x27;</span></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">beginPath</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">arc</span>(x, y, r, <span class=\"number\">0</span>, <span class=\"title class_\">Math</span>.<span class=\"property\">PI</span> * <span class=\"number\">2</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"property\">fillStyle</span> = color</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">fill</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">closePath</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//画线</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">function</span> <span class=\"title function_\">drawLine</span>(<span class=\"params\">x1, y1, x2, y2, color = <span class=\"string\">&#x27;black&#x27;</span>, width</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">beginPath</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">moveTo</span>(x1, y1)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">lineTo</span>(x2, y2)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"property\">strokeStyle</span> = color</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"property\">lineWidth</span> = width</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"property\">lineCap</span> = <span class=\"string\">&#x27;round&#x27;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">stroke</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">closePath</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n",
            "tags": [
                "canvas"
            ]
        },
        {
            "id": "http://example.com/2022/10/25/Canvas/%E7%BA%BF%E6%80%A7%E5%B0%8F%E7%90%83%E7%89%B9%E6%95%88/",
            "url": "http://example.com/2022/10/25/Canvas/%E7%BA%BF%E6%80%A7%E5%B0%8F%E7%90%83%E7%89%B9%E6%95%88/",
            "title": "线性小球特效",
            "date_published": "2022-10-25T15:45:07.000Z",
            "content_html": "<h3 id=\"线性小球特效\"><a href=\"#线性小球特效\" class=\"headerlink\" title=\"线性小球特效\"></a>线性小球特效</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">        * &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;500px&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;500px&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;canvas&quot;</span>&gt;</span></span><br><span class=\"line\">        您的浏览器版本过低，不支持canvas功能</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> canvas = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;canvas&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> ctx = canvas.<span class=\"title function_\">getContext</span>(<span class=\"string\">&#x27;2d&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">// 获取屏幕大小</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> w = <span class=\"variable language_\">document</span>.<span class=\"property\">documentElement</span>.<span class=\"property\">clientWidth</span> - <span class=\"number\">6</span> <span class=\"comment\">//画布大小</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> h = <span class=\"variable language_\">document</span>.<span class=\"property\">documentElement</span>.<span class=\"property\">clientHeight</span> - <span class=\"number\">6</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//更新宽高</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        canvas.<span class=\"property\">width</span> = w</span></span><br><span class=\"line\"><span class=\"language-javascript\">        canvas.<span class=\"property\">height</span> = h</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> speed = <span class=\"number\">15</span> <span class=\"comment\">//速度</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> ballNum = <span class=\"number\">15</span> <span class=\"comment\">//小球个数</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> lineColor = <span class=\"string\">&#x27;#ccc&#x27;</span> <span class=\"comment\">//线的颜色</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//文字</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> titleArr = (<span class=\"string\">&quot;JavaScript HTML5前端 JAVA PHP jQuery Canvas&quot;</span> +</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"string\">&quot; CSS CSS3 Angular Bootstrap LayUI 全栈工程师 NodeJS React Vue.js&quot;</span>).<span class=\"title function_\">split</span>(<span class=\"string\">&#x27; &#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> ballArr = [] <span class=\"comment\">//小球数组</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; ballNum; i++) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"comment\">// 当前小球</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">let</span> ball = <span class=\"keyword\">new</span> <span class=\"title class_\">Ball</span>(titleArr[i])</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ballArr.<span class=\"title function_\">push</span>(ball)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"built_in\">setInterval</span>(<span class=\"function\">() =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"comment\">//清除画布</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">clearRect</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, w, h)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; ballArr.<span class=\"property\">length</span>; i++) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                ballArr[i].<span class=\"title function_\">show</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"comment\">// 小球连线</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; i; j++) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"comment\">//取出当前小球前面的小球</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"keyword\">let</span> preBall = ballArr[j]</span></span><br><span class=\"line\"><span class=\"language-javascript\">                    <span class=\"title function_\">drawLine</span>(ballArr[i].<span class=\"property\">x</span>, ballArr[i].<span class=\"property\">y</span>, preBall.<span class=\"property\">x</span>, preBall.<span class=\"property\">y</span>, lineColor)</span></span><br><span class=\"line\"><span class=\"language-javascript\">                &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;, speed)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//创建小球类</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">function</span> <span class=\"title function_\">Ball</span>(<span class=\"params\">text</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">this</span>.<span class=\"property\">width</span> = w</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">this</span>.<span class=\"property\">height</span> = h <span class=\"comment\">//盒子宽高</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">this</span>.<span class=\"property\">r</span> = <span class=\"title function_\">r</span>(<span class=\"number\">30</span>) + <span class=\"number\">10</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">this</span>.<span class=\"property\">x</span> = <span class=\"title function_\">r</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">width</span> - <span class=\"number\">2</span> * <span class=\"variable language_\">this</span>.<span class=\"property\">r</span>) + <span class=\"variable language_\">this</span>.<span class=\"property\">r</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">this</span>.<span class=\"property\">y</span> = <span class=\"title function_\">r</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">height</span> - <span class=\"number\">2</span> * <span class=\"variable language_\">this</span>.<span class=\"property\">r</span>) + <span class=\"variable language_\">this</span>.<span class=\"property\">r</span> </span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">this</span>.<span class=\"property\">color</span> = <span class=\"title function_\">rColor2</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">this</span>.<span class=\"property\">xSpeed</span> = <span class=\"title function_\">r</span>(<span class=\"number\">5</span>) + <span class=\"number\">2</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">this</span>.<span class=\"property\">ySpeed</span> = <span class=\"title function_\">r</span>(<span class=\"number\">3</span>) + <span class=\"number\">1</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">this</span>.<span class=\"property\">text</span> = text</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title class_\">Ball</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">show</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">this</span>.<span class=\"title function_\">run</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"title function_\">drawCircle</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">x</span>, <span class=\"variable language_\">this</span>.<span class=\"property\">y</span>, <span class=\"variable language_\">this</span>.<span class=\"property\">r</span>, <span class=\"variable language_\">this</span>.<span class=\"property\">color</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"title function_\">drawText</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">text</span>, <span class=\"variable language_\">this</span>.<span class=\"property\">x</span> + <span class=\"variable language_\">this</span>.<span class=\"property\">r</span>, <span class=\"variable language_\">this</span>.<span class=\"property\">y</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title class_\">Ball</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">run</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">if</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">x</span> - <span class=\"variable language_\">this</span>.<span class=\"property\">r</span> &lt;= <span class=\"number\">0</span> || <span class=\"variable language_\">this</span>.<span class=\"property\">x</span> + <span class=\"variable language_\">this</span>.<span class=\"property\">r</span> &gt;= <span class=\"variable language_\">this</span>.<span class=\"property\">width</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"variable language_\">this</span>.<span class=\"property\">xSpeed</span> = -<span class=\"variable language_\">this</span>.<span class=\"property\">xSpeed</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125; </span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">this</span>.<span class=\"property\">x</span> += <span class=\"variable language_\">this</span>.<span class=\"property\">xSpeed</span>            </span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">if</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">y</span> - <span class=\"variable language_\">this</span>.<span class=\"property\">r</span> &lt;= <span class=\"number\">0</span> || <span class=\"variable language_\">this</span>.<span class=\"property\">y</span> + <span class=\"variable language_\">this</span>.<span class=\"property\">r</span> &gt;= <span class=\"variable language_\">this</span>.<span class=\"property\">height</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"variable language_\">this</span>.<span class=\"property\">ySpeed</span> = -<span class=\"variable language_\">this</span>.<span class=\"property\">ySpeed</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125;                    </span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">this</span>.<span class=\"property\">y</span> += <span class=\"variable language_\">this</span>.<span class=\"property\">ySpeed</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">// 随机颜色2：rgb</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">function</span> <span class=\"title function_\">rColor2</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">return</span> <span class=\"string\">&#x27;rgb(&#x27;</span> + <span class=\"title function_\">r</span>(<span class=\"number\">255</span>) + <span class=\"string\">&#x27;,&#x27;</span> + <span class=\"title function_\">r</span>(<span class=\"number\">255</span>) + <span class=\"string\">&#x27;,&#x27;</span> + <span class=\"title function_\">r</span>(<span class=\"number\">255</span>) + <span class=\"string\">&#x27;)&#x27;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">// 随机颜色#ffffff</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">function</span> <span class=\"title function_\">rColor</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">return</span> <span class=\"string\">&#x27;#&#x27;</span> + <span class=\"built_in\">parseInt</span>(<span class=\"title class_\">Math</span>.<span class=\"title function_\">random</span>() * <span class=\"number\">0xffffff</span>).<span class=\"title function_\">toString</span>(<span class=\"number\">16</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">// 随机数字</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">function</span> <span class=\"title function_\">r</span>(<span class=\"params\">num</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">return</span> <span class=\"built_in\">parseInt</span>(<span class=\"title class_\">Math</span>.<span class=\"title function_\">random</span>() * num)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">// 画文字</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">function</span> <span class=\"title function_\">drawText</span>(<span class=\"params\">text, x, y, font = <span class=\"string\">&#x27;20px 微软雅黑&#x27;</span></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"property\">font</span> = font</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"property\">textAlign</span> = <span class=\"string\">&#x27;top&#x27;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"property\">textBaseline</span> = <span class=\"string\">&#x27;middle&#x27;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">fillText</span>(text, x, y)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        </span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//画圆</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">function</span> <span class=\"title function_\">drawCircle</span>(<span class=\"params\">x, y, r, color = <span class=\"string\">&#x27;#000&#x27;</span></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">beginPath</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">arc</span>(x, y, r, <span class=\"number\">0</span>, <span class=\"title class_\">Math</span>.<span class=\"property\">PI</span> * <span class=\"number\">2</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"property\">fillStyle</span> = color</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">fill</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//画线</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">function</span> <span class=\"title function_\">drawLine</span>(<span class=\"params\">x1, y1, x2, y2, color = <span class=\"string\">&#x27;black&#x27;</span></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">beginPath</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">moveTo</span>(x1, y1)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">lineTo</span>(x2, y2)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"property\">strokeStyle</span> = color</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">stroke</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n",
            "tags": [
                "canvas"
            ]
        },
        {
            "id": "http://example.com/2022/10/24/%E5%85%B6%E4%BB%96/Svelet/Svelte%E5%92%8CSolid.js%EF%BC%9A%E6%96%B0%E9%94%90%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/",
            "url": "http://example.com/2022/10/24/%E5%85%B6%E4%BB%96/Svelet/Svelte%E5%92%8CSolid.js%EF%BC%9A%E6%96%B0%E9%94%90%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/",
            "title": "Svelte和Solid.js：新锐前端框架",
            "date_published": "2022-10-24T10:18:01.000Z",
            "content_html": "<h3 id=\"极简的组件表达式\"><a href=\"#极简的组件表达式\" class=\"headerlink\" title=\"极简的组件表达式\"></a>极简的组件表达式</h3><ul>\n<li>Svelet：贴近原生JS</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"keyword\">let</span> count = <span class=\"number\">0</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">const</span> <span class=\"title function_\">increment</span> = (<span class=\"params\"></span>) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        count += <span class=\"number\">1</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">on:click</span>=<span class=\"string\">&quot;increment&quot;</span>&gt;</span></span><br><span class=\"line\">    count is &#123;count&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>Solid.js：React hooks和Composition API的综合体</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//Counter.jsx</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createSignal &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;solid-js&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">Counter</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> [count, setCount] = <span class=\"title function_\">createSignal</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"title function_\">increment</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"title function_\">setCount</span>(<span class=\"title function_\">count</span>() + <span class=\"number\">1</span>));</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> increment()&#125;&gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">                count is &#123;count()&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">            <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>solid自动依赖追踪避免手动设置依赖项（createEffect）</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//solid</span></span><br><span class=\"line\"><span class=\"title function_\">createEffect</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;count：&#x27;</span> + <span class=\"title function_\">count</span>());</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//react：需要开发者操作依赖项</span></span><br><span class=\"line\"><span class=\"title function_\">useEffect</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;count：&#x27;</span> + <span class=\"title function_\">count</span>());</span><br><span class=\"line\">&#125;, [count])</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//Svelet：不需要响应式API</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> count = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">$</span>: <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(count)</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">increment</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">    count += <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"无虚拟DOM底层实现\"><a href=\"#无虚拟DOM底层实现\" class=\"headerlink\" title=\"无虚拟DOM底层实现\"></a>无虚拟DOM底层实现</h3><p>鱼和熊掌都可兼得！！！</p>\n<h3 id=\"性能表现\"><a href=\"#性能表现\" class=\"headerlink\" title=\"性能表现\"></a>性能表现</h3><ul>\n<li>solid和svelet性能总体逗比react hook的性能表现较佳</li>\n<li>solid和vue在生成代码量的表现上类似</li>\n</ul>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p><code>Svelte</code>和<code>Solid</code>有着优秀的开发体验和性能表现</p>\n<p>有很多适合它们的应用场景和优点</p>\n<p>底层独特巧妙的解决方案非常值得学习</p>\n",
            "tags": [
                "Svelet",
                "Solid.js"
            ]
        },
        {
            "id": "http://example.com/2022/10/24/%E5%85%B6%E4%BB%96/WebSocket/%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE%E9%80%89%E5%9E%8B%EF%BC%9AWebSocket/",
            "url": "http://example.com/2022/10/24/%E5%85%B6%E4%BB%96/WebSocket/%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE%E9%80%89%E5%9E%8B%EF%BC%9AWebSocket/",
            "title": "即时通讯协议选型：WebSocket协议",
            "date_published": "2022-10-24T06:38:06.000Z",
            "content_html": "<h4 id=\"WebSocket\"><a href=\"#WebSocket\" class=\"headerlink\" title=\"WebSocket\"></a>WebSocket</h4><p><strong>Socket：</strong>对处于网络中不同主机上的应用进程之间进行双向通信的端点的抽象，是应用程序通过网络协议进行通信的接口，一个Socket对应着通信的一端，由IP地址和端口组合而成。</p>\n<h4 id=\"WebSocket服务端与客户端之间的通信过程\"><a href=\"#WebSocket服务端与客户端之间的通信过程\" class=\"headerlink\" title=\"WebSocket服务端与客户端之间的通信过程\"></a>WebSocket服务端与客户端之间的通信过程</h4><ul>\n<li>服务端创建包含有效主机与端口的WebSocket实例，随后启动并等待客户端连接</li>\n<li>客户端创建WebSocket实例，并为该实例提供一个URL，该URL代表希望连接的服务器端</li>\n<li>客户端通过HTTP请求握手建立连接之后，后面就使用刚才发起HTTP请求的TCP连接进行双向通信。</li>\n</ul>\n<h4 id=\"WebSocket特点\"><a href=\"#WebSocket特点\" class=\"headerlink\" title=\"WebSocket特点\"></a>WebSocket特点</h4><ul>\n<li>WebSocket本身只是一个应用层协议</li>\n<li>一种全双工通信机制</li>\n</ul>\n<h4 id=\"传统的全双工协议的两种方式\"><a href=\"#传统的全双工协议的两种方式\" class=\"headerlink\" title=\"传统的全双工协议的两种方式\"></a>传统的全双工协议的两种方式</h4><ul>\n<li><strong>短轮询</strong> 即客户端定时向服务端发送请求，服务端收到请求后马上返回响应并关闭连接。 <ul>\n<li>优点：实现简单 </li>\n<li>缺点： <ul>\n<li>1.并发请求对服务端造成较大压力 </li>\n<li>2.数据可能没有更新，造成无效请求 </li>\n<li>3.频繁的网络请求导致客户端设备电量、流量快速消耗 </li>\n<li>4.定时操作存在时间差，可能造成数据同步不及时 </li>\n<li>5.每次请求都需要携带完整的请求头</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>长轮询</strong> 即服务端在收到请求之后，如果数据无更新，会阻塞请求，直至数据更新或连接超时才返回。 <ul>\n<li>优点：相较于短轮询减少了HTTP请求的次数，节省了部分资源。 </li>\n<li>缺点： <ul>\n<li>1.连接挂起同样会消耗资源 </li>\n<li>2.冗余请求头问题依旧存在</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"WebSocket比传统全双工协议的优势\"><a href=\"#WebSocket比传统全双工协议的优势\" class=\"headerlink\" title=\"WebSocket比传统全双工协议的优势\"></a>WebSocket比传统全双工协议的优势</h4><p>当连接建立之后，后续的数据都是以<strong>帧的形式</strong>发送。<strong>除非某一端主动断开连接，否则无需重新建立连接</strong>。因此可以做到：</p>\n<ul>\n<li>1.减轻服务器的负担 </li>\n<li>2.极大地减少不必要的流量、电量消耗 </li>\n<li>3.提高实时性，保证客户端和服务端数据的同步 </li>\n<li>4.减少冗余请求头造成的开销</li>\n</ul>\n<h4 id=\"WebSocket比其他即时通讯协议的优势\"><a href=\"#WebSocket比其他即时通讯协议的优势\" class=\"headerlink\" title=\"WebSocket比其他即时通讯协议的优势\"></a>WebSocket比其他即时通讯协议的优势</h4><ul>\n<li><p>1.<strong>较少的控制开销。</strong>在连接创建后，服务器和客户端之间交换数据时，用于协议控制的数据包头部相对较小。 </p>\n</li>\n<li><p>2.<strong>更好的二进制支持。</strong>Websocket定义了二进制帧，相对HTTP，可以更轻松地处理二进制内容。 </p>\n</li>\n<li><p>3.<strong>可以支持扩展。</strong>Websocket定义了扩展，用户可以扩展协议、实现部分自定义的子协议，如XMPP协议、MQTT协议等。</p>\n</li>\n</ul>\n<h4 id=\"WebSocket协议在Android客户端的实现\"><a href=\"#WebSocket协议在Android客户端的实现\" class=\"headerlink\" title=\"WebSocket协议在Android客户端的实现\"></a>WebSocket协议在Android客户端的实现</h4><ul>\n<li>创建WebSocket实例并提供一个URL以指定要连接的服务器地址</li>\n<li>提供一个WebSocket连接事件监听器，用于监听事件回调以处理连接生命周期的每个阶段</li>\n</ul>\n<p>[即时通讯协议选型：WebSocket协议](<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudG91dGlhby5jb20vYXJ0aWNsZS83MTU2MjA5OTM4NTM1MDM5NTI5Lz9vbmx5X3JlYz0xJnNoYXJlX3Rva2VuPTkzNTAyNzUxLTM0ZmEtNDZlZi1iODUxLWUyNzUyZWM0Yjg0OSZzb3VyY2U9bV9yZWRpcmVjdCZ3aWQ9MTY2NjU5Mjc2NzEyNg==\">即时通讯协议选型：WebSocket协议-今日头条 (toutiao.com)</span>)</p>\n",
            "tags": [
                "WebSocket"
            ]
        },
        {
            "id": "http://example.com/2022/10/22/js%E9%AB%98%E7%BA%A7/11-%E6%89%8B%E5%86%99new%EF%BC%8Ccall%EF%BC%8Capply%E7%9A%84%E5%AE%9E%E7%8E%B0/",
            "url": "http://example.com/2022/10/22/js%E9%AB%98%E7%BA%A7/11-%E6%89%8B%E5%86%99new%EF%BC%8Ccall%EF%BC%8Capply%E7%9A%84%E5%AE%9E%E7%8E%B0/",
            "title": "手写new，call，apply的实现",
            "date_published": "2022-10-22T05:20:48.000Z",
            "content_html": "<h3 id=\"手写new的实现\"><a class=\"markdownIt-Anchor\" href=\"#手写new的实现\">#</a> 手写 new 的实现</h3>\n<ul>\n<li>第一版</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">_new</span>(<span class=\"params\">Ctor, ...args</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> obj = &#123;&#125;</span><br><span class=\"line\">    obj.<span class=\"property\">__proto__</span> = <span class=\"title class_\">Ctor</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span></span><br><span class=\"line\">    <span class=\"title class_\">Ctor</span>.<span class=\"title function_\">apply</span>(obj, args)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> obj</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>第二版</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">_new</span>(<span class=\"params\">Ctor, ...args</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//判断是否是构造器</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!<span class=\"title class_\">Ctor</span>.<span class=\"title function_\">hasOwnProperty</span>(<span class=\"string\">&#x27;prototype&#x27;</span>)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TypeError</span>(<span class=\"string\">&#x27;Ctor is not a constructor&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//根据Ctor的原型创建一个对象</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> obj = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(<span class=\"title class_\">Ctor</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//显示绑定</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> result = <span class=\"title class_\">Ctor</span>.<span class=\"title function_\">apply</span>(obj, args)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//判断绑定结果不是null且对象和函数同时可能存在的情况</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(result !== <span class=\"literal\">null</span> &amp;&amp; (<span class=\"keyword\">typeof</span> result == <span class=\"string\">&#x27;object&#x27;</span> || <span class=\"keyword\">typeof</span> result == <span class=\"string\">&#x27;function&#x27;</span>)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> obj</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>调用：</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Pig</span>(<span class=\"params\"></span>)&#123; <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name &#125;</span><br><span class=\"line\"><span class=\"title function_\">_new</span>(<span class=\"title class_\">Pig</span>, <span class=\"string\">&quot;peiqi&quot;</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"手写call的实现\"><a class=\"markdownIt-Anchor\" href=\"#手写call的实现\">#</a> 手写 call 的实现</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">; (<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 接收实参有三种方案:</span></span><br><span class=\"line\">    <span class=\"comment\">//    1)通过形参</span></span><br><span class=\"line\">    <span class=\"comment\">//    2)通过...args</span></span><br><span class=\"line\">    <span class=\"comment\">//    3)通过arguments  伪数组  接收了所有的实以</span></span><br><span class=\"line\">    <span class=\"keyword\">function</span> <span class=\"title function_\">mycall</span>(<span class=\"params\">context</span>) &#123;</span><br><span class=\"line\">        context = context ? <span class=\"title class_\">Object</span>(context) : <span class=\"variable language_\">window</span></span><br><span class=\"line\">        context.<span class=\"property\">f</span> = <span class=\"variable language_\">this</span>; <span class=\"comment\">// f也是指向fn函数</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> args = [];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; <span class=\"variable language_\">arguments</span>.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">            args.<span class=\"title function_\">push</span>(<span class=\"variable language_\">arguments</span>[i])</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> res = context.<span class=\"title function_\">f</span>(...args);  <span class=\"comment\">// 隐式绑定</span></span><br><span class=\"line\">        <span class=\"keyword\">delete</span> context.<span class=\"property\">f</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 挂载到Function的原型对象上</span></span><br><span class=\"line\">    <span class=\"comment\">// 就意味着所有的函数都可以调用mycall</span></span><br><span class=\"line\">    <span class=\"title class_\">Function</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">mycall</span> = mycall;</span><br><span class=\"line\">&#125;)()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\">num1, num2</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> num1 + num2;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;wc&quot;</span> &#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> res = fn.<span class=\"title function_\">mycall</span>(obj, <span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res);</span><br></pre></td></tr></table></figure>\n<h3 id=\"手写apply的实现\"><a class=\"markdownIt-Anchor\" href=\"#手写apply的实现\">#</a> 手写 apply 的实现</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">; (<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">function</span> <span class=\"title function_\">mlapply</span>(<span class=\"params\">context, args</span>) &#123;</span><br><span class=\"line\">        context = context ? <span class=\"title class_\">Object</span>(context) : <span class=\"variable language_\">window</span>;</span><br><span class=\"line\">        context.<span class=\"property\">f</span> = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> res = context.<span class=\"title function_\">f</span>(...args);</span><br><span class=\"line\">        <span class=\"keyword\">delete</span> context.<span class=\"property\">f</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title class_\">Function</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">mlapply</span> = mlapply;</span><br><span class=\"line\">&#125;())</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "JavaScript"
            ]
        },
        {
            "id": "http://example.com/2022/10/21/js%E9%AB%98%E7%BA%A7/10-%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9AJS%E4%B8%AD%E5%9C%A8%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8Ba%E7%AD%89%E4%BA%8E1%E6%88%96%E8%80%852%E6%88%96%E8%80%853/",
            "url": "http://example.com/2022/10/21/js%E9%AB%98%E7%BA%A7/10-%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9AJS%E4%B8%AD%E5%9C%A8%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8Ba%E7%AD%89%E4%BA%8E1%E6%88%96%E8%80%852%E6%88%96%E8%80%853/",
            "title": "面试题：JS中在什么情况下a等于1或者2或者3",
            "date_published": "2022-10-21T15:02:20.000Z",
            "content_html": "<h3 id=\"面试题1js中在什么情况下a等于1或者2或者3\"><a class=\"markdownIt-Anchor\" href=\"#面试题1js中在什么情况下a等于1或者2或者3\">#</a> 面试题 1：JS 中在什么情况下 a 等于 1 或者 2 或者 3？</h3>\n<p><strong>题目详情如下：</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let a = ?;</span><br><span class=\"line\">if (a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3) &#123;</span><br><span class=\"line\">    console.log(&quot;i love you~&quot;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>方案一：通过重写 valueOf 方法返回 1,2,3</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = &#123;</span><br><span class=\"line\">    <span class=\"attr\">i</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"attr\">valueOf</span>: <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ++<span class=\"variable language_\">this</span>.<span class=\"property\">i</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>方案二：通过重写 toString 方法返回 1,2,3</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = &#123;</span><br><span class=\"line\">    <span class=\"attr\">i</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"attr\">toString</span>: <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ++<span class=\"variable language_\">this</span>.<span class=\"property\">i</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>方案三：通过数组的 shift 每次拿到 1,2,3 赋值给 toString 方法</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>];</span><br><span class=\"line\">a.<span class=\"property\">toString</span> = a.<span class=\"property\">shift</span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>方案四：通过 Object.defineProperty 定义变量进行迭代</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(<span class=\"variable language_\">window</span>,<span class=\"string\">&quot;a&quot;</span>,&#123;</span><br><span class=\"line\">    <span class=\"title function_\">get</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ++i;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "JavaScript",
                "面试题"
            ]
        },
        {
            "id": "http://example.com/2022/10/21/js%E9%AB%98%E7%BA%A7/09-with%EF%BC%8Ceval%EF%BC%8C%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F/",
            "url": "http://example.com/2022/10/21/js%E9%AB%98%E7%BA%A7/09-with%EF%BC%8Ceval%EF%BC%8C%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F/",
            "title": "with，eval，严格模式",
            "date_published": "2022-10-21T14:49:23.000Z",
            "content_html": "<h4 id=\"with\"><a class=\"markdownIt-Anchor\" href=\"#with\">#</a> with</h4>\n<ul>\n<li>\n<p>功能：扩展作用域链。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> address = <span class=\"string\">&quot;bj&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">    <span class=\"attr\">uname</span>: <span class=\"string\">&quot;wc&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">uage</span>: <span class=\"number\">18</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">with</span> (obj) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// var uname = &quot;xq&quot;;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 如果自己没有uname，会去obj中找uname</span></span><br><span class=\"line\">    <span class=\"comment\">// with扩展了作用域链</span></span><br><span class=\"line\">    <span class=\"comment\">// 如果obj中没有，去ECG中找</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(uname);</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(address);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>在开发中，不要使用 with 语句，因为破坏了作用域链</p>\n</li>\n<li>\n<p>vue 源码中使用到了 with 语句</p>\n</li>\n</ul>\n<h4 id=\"eval\"><a class=\"markdownIt-Anchor\" href=\"#eval\">#</a> eval</h4>\n<ul>\n<li>\n<p>功能：把一片字符串，当成 JS 代码去执行。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> age = <span class=\"number\">110</span>;</span><br><span class=\"line\"><span class=\"comment\">//  一片字符串</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> jsStr = <span class=\"string\">&quot; var msg=&#x27;haha&#x27;; console.log(msg); console.log(age); &quot;</span>;</span><br><span class=\"line\"><span class=\"built_in\">eval</span>(jsStr);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>eval 是 JS 中内置的函数，直接去调用</p>\n</li>\n<li>\n<p>eval 执行的代码，并不是一个沙箱环境，受外界的影响</p>\n</li>\n<li>\n<p>开发中不建议使用</p>\n</li>\n</ul>\n<h4 id=\"严格模式\"><a class=\"markdownIt-Anchor\" href=\"#严格模式\">#</a> 严格模式</h4>\n<p>JS 被设计时，非常灵活，也有非常多的不足，在 ES5 中，提出了严格模式，默认情况下，我们写的代码执行时，并不是严格模式。要使用严格模式，必须开启严格模式。</p>\n<ul>\n<li>\n<p>开启严格模式</p>\n<ul>\n<li>\n<p>在一个 JS 文件的最前面开启，这样，整个 JS 文件都要受严格模式的约束。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// js文件</span></span><br><span class=\"line\"><span class=\"meta\">&quot;use strict&quot;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>在某个函数中，开启严格模式，函数体中的代码就受严格模式的约束。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">gn</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    a = <span class=\"number\">123</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;use strict&quot;</span>;</span><br><span class=\"line\">    <span class=\"title function_\">gn</span>();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_\">fn</span>();</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li>\n<p>严格模式限制</p>\n<ul>\n<li>\n<p>不能使用没有加 var 的全局变量</p>\n</li>\n<li>\n<p>在严格模式下形参不能重名</p>\n</li>\n<li>\n<p>不能使用老的 8 进制数据的写法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// let num1 = 0x123; // 16进制</span></span><br><span class=\"line\"><span class=\"comment\">// let num2 = 0o10; // 8进制</span></span><br><span class=\"line\"><span class=\"comment\">// let num3 = 010;  // 8进制 (老的写法)</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>不能使用 with 语句</p>\n</li>\n<li>\n<p>在严格模式下，JS 串中定义的数据，外界不能使用。外界定义的数据，在 JS 串中还是可以使用</p>\n</li>\n<li>\n<p>在非严格模式下，this 是 window  在严格模式下，不会默认绑定，this 是 undefind。 独立函数调用，this 不再表示 window，是 und</p>\n</li>\n</ul>\n</li>\n</ul>\n",
            "tags": [
                "JavaScript"
            ]
        },
        {
            "id": "http://example.com/2022/10/21/js%E9%AB%98%E7%BA%A7/08-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/",
            "url": "http://example.com/2022/10/21/js%E9%AB%98%E7%BA%A7/08-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/",
            "title": "数据存储",
            "date_published": "2022-10-21T14:34:23.000Z",
            "content_html": "<h3 id=\"localstorage\"><a class=\"markdownIt-Anchor\" href=\"#localstorage\">#</a> localStorage</h3>\n<h4 id=\"使用的api\"><a class=\"markdownIt-Anchor\" href=\"#使用的api\">#</a> 使用的 API</h4>\n<ul>\n<li>length 返回数据的数量</li>\n<li>setItem (key, value) 存储数据的 如果 key 一样，数据会发生覆盖</li>\n<li>getItem (key) 获取数据</li>\n<li>removeItem (key) 删除数据</li>\n<li>Clear () 清除 local storage 中的所有的数据</li>\n</ul>\n<p><strong>localStorage 是永久本地存储，只能手动删除修改</strong></p>\n<h4 id=\"sessionstorage\"><a class=\"markdownIt-Anchor\" href=\"#sessionstorage\">#</a> SessionStorage</h4>\n<h4 id=\"使用的api-2\"><a class=\"markdownIt-Anchor\" href=\"#使用的api-2\">#</a> 使用的 API</h4>\n<ul>\n<li>length 返回数据的数量</li>\n<li>setItem (key, value) 存储数据的 如果 key 一样，数据会发生覆盖</li>\n<li>getItem (key) 获取数据</li>\n<li>removeItem (key) 删除数据</li>\n<li>Clear () 清除 session storage 中的所有的数据</li>\n</ul>\n<p><strong>如果把浏览器关闭了，sessioinStorage 中的数据就没有了</strong></p>\n<h3 id=\"封装cache缓存存储\"><a class=\"markdownIt-Anchor\" href=\"#封装cache缓存存储\">#</a> 封装 Cache：缓存存储</h3>\n<ul>\n<li>使用<strong>原型对象</strong>封装：</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Cache</span>(<span class=\"params\">isLocal = <span class=\"literal\">true</span></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">storage</span> = isLocal ? <span class=\"variable language_\">localStorage</span> : sessionStorage;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Cache</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">setItem</span> = <span class=\"keyword\">function</span> (<span class=\"params\">key, value</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (value) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">storage</span>.<span class=\"title function_\">setItem</span>(key, <span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(value))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Cache</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">getItem</span> = <span class=\"keyword\">function</span> (<span class=\"params\">key</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> value = <span class=\"variable language_\">this</span>.<span class=\"property\">storage</span>.<span class=\"title function_\">getItem</span>(key);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (value) &#123;</span><br><span class=\"line\">        value = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(value)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Cache</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">removeItem</span> = <span class=\"keyword\">function</span> (<span class=\"params\">key</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">storage</span>.<span class=\"title function_\">removeItem</span>(key)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Cache</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">clear</span> = <span class=\"keyword\">function</span> (<span class=\"params\">key</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">storage</span>.<span class=\"title function_\">clear</span>()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Cache</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">length</span> = <span class=\"keyword\">function</span> (<span class=\"params\">key</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">storage</span>.<span class=\"property\">length</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> localCache = <span class=\"keyword\">new</span> <span class=\"title class_\">Cache</span>();</span><br><span class=\"line\"><span class=\"keyword\">let</span> sessionCache = <span class=\"keyword\">new</span> <span class=\"title class_\">Cache</span>(<span class=\"literal\">false</span>);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>使用<strong> class</strong> 封装：</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Cache</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">constructor</span>(<span class=\"params\">isLocal = <span class=\"literal\">true</span></span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">storage</span> = isLocal ? <span class=\"variable language_\">localStorage</span> : sessionStorage;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">setItem</span>(<span class=\"params\">key, value</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">storage</span>.<span class=\"title function_\">setItem</span>(key, <span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(value))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">getItem</span>(<span class=\"params\">key</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> value = <span class=\"variable language_\">this</span>.<span class=\"property\">storage</span>.<span class=\"title function_\">getItem</span>(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value) &#123;</span><br><span class=\"line\">            value = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(value)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">removeItem</span>(<span class=\"params\">key</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">storage</span>.<span class=\"title function_\">removeItem</span>(key)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">clear</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">storage</span>.<span class=\"title function_\">clear</span>()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">length</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">storage</span>.<span class=\"property\">length</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> localCache = <span class=\"keyword\">new</span> <span class=\"title class_\">Cache</span>();</span><br><span class=\"line\"><span class=\"keyword\">let</span> sessionCache = <span class=\"keyword\">new</span> <span class=\"title class_\">Cache</span>(<span class=\"literal\">false</span>);</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "JavaScript",
                "cache"
            ]
        },
        {
            "id": "http://example.com/2022/10/21/js%E9%AB%98%E7%BA%A7/07-JSON/",
            "url": "http://example.com/2022/10/21/js%E9%AB%98%E7%BA%A7/07-JSON/",
            "title": "JSON",
            "date_published": "2022-10-21T14:21:05.000Z",
            "content_html": "<h2 id=\"json\"><a class=\"markdownIt-Anchor\" href=\"#json\">#</a> JSON</h2>\n<ul>\n<li>JSON: JavaScript Object Notation JS 对象描述符</li>\n<li>前后端交互的一种数据格式，我们可以把 JSON 数据扔给后端，后端也可以响应 JSON 数据</li>\n</ul>\n<h3 id=\"json格式\"><a class=\"markdownIt-Anchor\" href=\"#json格式\">#</a> JSON 格式</h3>\n<ul>\n<li>\n<p>格式一：字符串</p>\n<ul>\n<li>\n<p>不能使用单引号</p>\n</li>\n<li>\n<p>很少使用直接的字符串类型，而是被包装成后两种</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;hello json&quot;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li>\n<p>格式二：对象</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;wc&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;age&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">18</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;friend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;xq&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hobbies&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"string\">&quot;coding&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>格式三：数组</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;abc&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"number\">123</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;wc&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">]</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"json序列化和反序列化\"><a class=\"markdownIt-Anchor\" href=\"#json序列化和反序列化\">#</a> JSON 序列化和反序列化</h3>\n<ul>\n<li>\n<p>序列化：把对象转成 JSON 串</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;wc&quot;</span> &#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> jsonStr = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(obj)</span><br><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"property\">localStorage</span>.<span class=\"title function_\">setItem</span>(<span class=\"string\">&quot;obj&quot;</span>, jsonStr)</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>反序列化：把 JSON 串还原成 JS 对象</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> jsonStr = <span class=\"variable language_\">window</span>.<span class=\"property\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&quot;obj&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(jsonStr);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>序列化和反序列化过程是深度拷贝</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>:<span class=\"string\">&quot;wc&quot;</span>&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> newObj = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(obj));</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(obj === newObj) <span class=\"comment\">//false</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n",
            "tags": [
                "JavaScript",
                "JSON"
            ]
        },
        {
            "id": "http://example.com/2022/10/21/js%E9%AB%98%E7%BA%A7/06-%E7%BB%A7%E6%89%BF/",
            "url": "http://example.com/2022/10/21/js%E9%AB%98%E7%BA%A7/06-%E7%BB%A7%E6%89%BF/",
            "title": "JS继承",
            "date_published": "2022-10-21T02:21:05.000Z",
            "content_html": "<h2 id=\"继承\"><a class=\"markdownIt-Anchor\" href=\"#继承\">#</a> 继承</h2>\n<p>让多个类之前，建立关系，便于代码的管理和复用。</p>\n<h3 id=\"不使用继承\"><a class=\"markdownIt-Anchor\" href=\"#不使用继承\">#</a> 不使用继承</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Person</span>(<span class=\"params\">name, age</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">age</span> = age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title class_\">Person</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">sayHello</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123; <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;开始说话...&quot;</span>); &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Student</span>(<span class=\"params\">name, age, className</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">age</span> = age;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">className</span> = className;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title class_\">Student</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">sayHello</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123; <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;开始说话...&quot;</span>); &#125;</span><br></pre></td></tr></table></figure>\n<p>同种属性或者类似的方法不能复用，代码累赘。</p>\n<h3 id=\"原型继承\"><a class=\"markdownIt-Anchor\" href=\"#原型继承\">#</a> 原型继承</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Student</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Person</span>();  <span class=\"comment\">// 原型继承可以继承父类上的公有方法</span></span><br><span class=\"line\"><span class=\"title class_\">Student</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">constructor</span> = <span class=\"title class_\">Student</span>;  <span class=\"comment\">// 手动修改constructor的指向</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>通过显式原型对象建立对象关系，即子对象的原型指向父类。</p>\n</li>\n<li>\n<p>原型链继承：<strong>改变子类的原型对象</strong></p>\n<ul>\n<li>\n<p>核心：Student.prototype = new Person ();   修改子类的原型对象</p>\n</li>\n<li>\n<p>缺点：如果父中的数据是引用数据类型，子对象修改了，另一个子对象也会受影响</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"组合继承\"><a class=\"markdownIt-Anchor\" href=\"#组合继承\">#</a> 组合继承</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Person</span>(<span class=\"params\">name,age</span>)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">age</span> = age;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;Person执行了...&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Student</span>(<span class=\"params\">name,age,className</span>)&#123;</span><br><span class=\"line\">    <span class=\"title class_\">Person</span>.<span class=\"title function_\">call</span>(<span class=\"variable language_\">this</span>,name,age);  <span class=\"comment\">// 1遍,调用父类传参</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">className</span> = className;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// new Person(); // 也让Person函数执行一遍</span></span><br><span class=\"line\"><span class=\"title class_\">Student</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Person</span>(); <span class=\"comment\">// 原型链继承核心</span></span><br><span class=\"line\"><span class=\"title class_\">Student</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">constructor</span> = <span class=\"title class_\">Student</span>; </span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>核心：</p>\n<ul>\n<li>\n<p>Student.prototype = new Person (); // 继承父类的公有属性</p>\n</li>\n<li>\n<p>Person.call (this,name,age);  // 继承父类的私有属性</p>\n</li>\n</ul>\n</li>\n<li>\n<p>缺点：Person.call (this,name,age);  让父类构造函数多执行一遍</p>\n<h3 id=\"objectcreateapi\"><a class=\"markdownIt-Anchor\" href=\"#objectcreateapi\">#</a> Object.createAPI</h3>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建一个对象，又有一个新方案：Object.create</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> res = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(obj);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 用来创建一个非常干净的，没有原型对象的对象</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> res2 = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(<span class=\"literal\">null</span>);</span><br></pre></td></tr></table></figure>\n<p>Object.create 可以给创建出来的新对象指定原型对象。</p>\n<h3 id=\"寄生组合继承\"><a class=\"markdownIt-Anchor\" href=\"#寄生组合继承\">#</a> 寄生组合继承</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Student</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(<span class=\"title class_\">Person</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>)</span><br></pre></td></tr></table></figure>\n<p>使用 Object.createAPI 和组合继承一起调用。</p>\n<h3 id=\"es6中的class继承\"><a class=\"markdownIt-Anchor\" href=\"#es6中的class继承\">#</a> ES6 中的 Class 继承</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Person</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">constructor</span>(<span class=\"params\">name, age</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">age</span> = age;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">sayHello</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;会说话...&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 让Student类继承Person类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Student</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Person</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">constructor</span>(<span class=\"params\">name, age, className</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">super</span>(name, age); <span class=\"comment\">// 调用父类的 constructor</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">className</span> = className;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "JavaScript",
                "继承"
            ]
        },
        {
            "id": "http://example.com/2022/10/19/js%E9%AB%98%E7%BA%A7/05-%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/",
            "url": "http://example.com/2022/10/19/js%E9%AB%98%E7%BA%A7/05-%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/",
            "title": "原型和原型链",
            "date_published": "2022-10-19T13:29:05.000Z",
            "content_html": "<h3 id=\"原型\"><a class=\"markdownIt-Anchor\" href=\"#原型\">#</a> 原型</h3>\n<h4 id=\"原型对象\"><a class=\"markdownIt-Anchor\" href=\"#原型对象\">#</a> 原型对象</h4>\n<ul>\n<li>\n<p>显示原型</p>\n<ul>\n<li>每个构造器（类）上都有一个叫 prototype 属性</li>\n<li>prototype 叫显示原型</li>\n</ul>\n</li>\n<li>\n<p>隐式原型</p>\n<ul>\n<li>\n<p>只要是一个对象，它的身上必定有一个属性，叫 <strong>proto</strong>，_ __proto__是属性名，叫隐式原型，对象的值是一个对象</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> obj = &#123;&#125;</span><br><span class=\"line\">obj.<span class=\"property\">__proto__</span> <span class=\"comment\">//隐式原型对象</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li>\n<p>显示原型和隐式原型指向同一个对象，叫做原型对象</p>\n</li>\n</ul>\n<h4 id=\"对象的私有和公有属性\"><a class=\"markdownIt-Anchor\" href=\"#对象的私有和公有属性\">#</a> 对象的私有和公有属性</h4>\n<ul>\n<li>\n<p>obj 是一个对象，属性的无序集合，属性的分类有两种：</p>\n<ul>\n<li>私有属性\n<ul>\n<li>非 proto 找到的属性</li>\n</ul>\n</li>\n<li>公有属性  沿着__proto__找到的属性都是公有属性</li>\n</ul>\n</li>\n<li>\n<p>对象在调用属性时，先使用 hasOwnProperty 方法判断是否是私有属性，如果没有就会沿着原型链向上查找</p>\n</li>\n</ul>\n<h4 id=\"两个属性存在判断方法\"><a class=\"markdownIt-Anchor\" href=\"#两个属性存在判断方法\">#</a> 两个属性存在判断方法</h4>\n<ul>\n<li>\n<p>hasOwnProperty</p>\n<ul>\n<li>\n<p>判断当前对象自身是否有该属性（不在原型链上寻找，判断是否是私有）</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">    <span class=\"attr\">name</span>:<span class=\"string\">&quot;wc&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">age</span>:<span class=\"number\">18</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(obj.<span class=\"title function_\">hasOwnProperty</span>(<span class=\"string\">&#x27;name&#x27;</span>));  <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li>\n<p>in</p>\n<ul>\n<li>\n<p>判断当前对象是否有该属性（任何位置，不管是公有还是私有）</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> arr = [];</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;push&quot;</span> <span class=\"keyword\">in</span> arr);  <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"原型链\"><a class=\"markdownIt-Anchor\" href=\"#原型链\">#</a> 原型链</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// arr1是对象  对象身上都有一个隐式原型</span></span><br><span class=\"line\"><span class=\"comment\">// Array是类，也叫构造器，本质就是函数</span></span><br><span class=\"line\"><span class=\"comment\">// 函数身都都一个显示原型</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> arr1 = <span class=\"keyword\">new</span> <span class=\"title class_\">Array</span>(<span class=\"string\">&quot;wc&quot;</span>, <span class=\"string\">&quot;xq&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> arr2 = <span class=\"keyword\">new</span> <span class=\"title class_\">Array</span>(<span class=\"string\">&quot;jj&quot;</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Array</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> == arr1.<span class=\"property\">__proto__</span>); <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Array</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> == arr2.<span class=\"property\">__proto__</span>); <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr1.<span class=\"property\">__proto__</span>.<span class=\"property\">__proto__</span> == <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>); <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr1.<span class=\"property\">__proto__</span>.<span class=\"property\">__proto__</span>.<span class=\"property\">__proto__</span>); <span class=\"comment\">// null</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>作用域链：在 EC 中查找数据的机制</li>\n</ul>\n<p><img data-src=\"./../../image/12321-1666190602837-3.png\" alt=\"12321\"></p>\n<ul>\n<li>\n<p>原型链：在对象上查找某个属性的机制</p>\n<ul>\n<li>\n<p>上图中的查找顺序如下图红色线所指：</p>\n<p><img data-src=\"./../../image/14-%E5%8E%9F%E5%9E%8B%E9%93%BE.png\" alt=\"14-原型链\"></p>\n</li>\n<li>\n<p>原型查找不断向上寻找作用域链中的属性</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 构造器</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Person</span>(<span class=\"params\">name,age</span>)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">age</span> = age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> p = <span class=\"keyword\">new</span> <span class=\"title class_\">Person</span>(<span class=\"string\">&quot;wc&quot;</span>,<span class=\"number\">18</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(p.<span class=\"property\">__proto__</span>.<span class=\"property\">constructor</span> == <span class=\"title class_\">Person</span>); <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<p><img data-src=\"./../../image/15-%E5%8E%9F%E5%9E%8B%E9%93%BE.png\" alt=\"15-原型链\"></p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"总结\"><a class=\"markdownIt-Anchor\" href=\"#总结\">#</a> 总结</h3>\n<ul>\n<li>\n<p>一切都是对象</p>\n</li>\n<li>\n<p>对象是属性的无序集合</p>\n</li>\n<li>\n<p>属性分公有属性和私有属性</p>\n</li>\n<li>\n<p>每个对象身上都有一个__proto__属性，叫隐式原型</p>\n</li>\n<li>\n<p>每个函数身上都有一个 prototype 属性，叫显示式原型</p>\n</li>\n<li>\n<p>对象的隐式原型和函数的显示原型，指向一个对象，叫原型对象</p>\n</li>\n<li>\n<p>每一个原型对象身上有一个 constructor 属性，指向函数本身</p>\n</li>\n</ul>\n",
            "tags": [
                "JavaScript",
                "原型",
                "原型链"
            ]
        },
        {
            "id": "http://example.com/2022/10/18/js%E9%AB%98%E7%BA%A7/04-OOP%E5%8F%8A%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%A1%88/",
            "url": "http://example.com/2022/10/18/js%E9%AB%98%E7%BA%A7/04-OOP%E5%8F%8A%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%A1%88/",
            "title": "OOP",
            "date_published": "2022-10-18T12:46:23.000Z",
            "content_html": "<h2 id=\"oop\"><a class=\"markdownIt-Anchor\" href=\"#oop\">#</a> OOP</h2>\n<h3 id=\"对象的创建方法\"><a class=\"markdownIt-Anchor\" href=\"#对象的创建方法\">#</a> 对象的创建方法</h3>\n<ul>\n<li>new Object()</li>\n<li>let obj = {}</li>\n</ul>\n<h3 id=\"js的内置类\"><a class=\"markdownIt-Anchor\" href=\"#js的内置类\">#</a> JS 的内置类</h3>\n<ul>\n<li>常用的：Number，Array，Date，Function，Math，String，Boolean，Window，Set，Map</li>\n<li>Math，Window 等是单体内置类（不能 new）</li>\n</ul>\n<h3 id=\"js所有数据都是对象\"><a class=\"markdownIt-Anchor\" href=\"#js所有数据都是对象\">#</a> JS 所有数据都是对象</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 得到一个伪数组  伪数组不是数组  是对象</span></span><br><span class=\"line\"><span class=\"comment\">// [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]    &#123;0:&quot;a&quot;,1:&quot;b&quot;,2:&quot;c&quot;&#125;伪数组</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Array</span>.<span class=\"title function_\">isArray</span>(<span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;li&quot;</span>)));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> lis = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;li&quot;</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(lis[<span class=\"number\">0</span>]);</span><br><span class=\"line\"><span class=\"comment\">// 一个真实的DOM元素，本质就是一个对象</span></span><br><span class=\"line\"><span class=\"comment\">// 这个对象中的属性非常多，操作这个对象，性能就非常低</span></span><br><span class=\"line\"><span class=\"comment\">// jq死了，jq操作的是DOM元素，操作DOM元素性能就低</span></span><br><span class=\"line\"><span class=\"comment\">// vue  react操作的是虚拟DOM元素，虚拟DOM中的属性就没有那么多</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">dir</span>(lis[<span class=\"number\">0</span>]);</span><br></pre></td></tr></table></figure>\n<p>因此，在开发中，一般不直接操作原生 DOM，而是使用项目框架来操作虚拟 DOM，提高性能。</p>\n<ul>\n<li>\n<p>对象中的键都是字符串，不管加不加单双引号</p>\n</li>\n<li>\n<p>键也可以是其他值</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj1 = &#123;</span><br><span class=\"line\">    <span class=\"number\">123</span>: <span class=\"string\">&quot;wc&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">true</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">    <span class=\"attr\">undefined</span>: <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;run...&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(obj1[<span class=\"number\">123</span>]);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(obj1[<span class=\"literal\">true</span>]);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(obj1.<span class=\"property\">true</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(obj1.<span class=\"title function_\">undefined</span>());</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(obj1[<span class=\"literal\">undefined</span>]());</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>对象没有 length</p>\n</li>\n<li>\n<p>遍历对象</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 遍历对象使用for in</span></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> obj)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(obj[key]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"对象创建方案\"><a class=\"markdownIt-Anchor\" href=\"#对象创建方案\">#</a> 对象创建方案</h3>\n<ul>\n<li>\n<p>通过字面量的形式创建对象</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> wc = &#123;</span><br><span class=\"line\">    <span class=\"attr\">name</span>: <span class=\"string\">&quot;wangcai&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">age</span>: <span class=\"number\">11</span>,</span><br><span class=\"line\">    <span class=\"attr\">height</span>: <span class=\"number\">188</span>,</span><br><span class=\"line\">    <span class=\"attr\">address</span>: <span class=\"string\">&quot;bj&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">coding</span>: <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123; <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;coding...&quot;</span>); &#125;,</span><br><span class=\"line\">    <span class=\"attr\">eating</span>: <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123; <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;eating...&quot;</span>); &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>缺点：①大量重复代码；②内存空间浪费</p>\n</li>\n<li>\n<p>工厂函数创建对象</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createPerson</span>(<span class=\"params\">name,age,height,address</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> p = &#123;&#125;;</span><br><span class=\"line\">    p.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">    p.<span class=\"property\">age</span> = age;</span><br><span class=\"line\">    p.<span class=\"property\">height</span> = height;</span><br><span class=\"line\">    p.<span class=\"property\">address</span> = address;</span><br><span class=\"line\">    p.<span class=\"property\">coding</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123; <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;coding...&quot;</span>);&#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> wc = <span class=\"title function_\">createPerson</span>(<span class=\"string\">&quot;wangcai&quot;</span>,<span class=\"number\">11</span>,<span class=\"number\">180</span>,<span class=\"string\">&quot;bj&quot;</span>);  wc.<span class=\"title function_\">coding</span>();</span><br></pre></td></tr></table></figure>\n<p>直接产出对象</p>\n<p>缺点：获取工厂化对象时会通过字面量形式</p>\n</li>\n<li>\n<p>构造器创建对象</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Fn</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;fn...&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 1）创建一个新的对象</span></span><br><span class=\"line\">    <span class=\"comment\">// 2）让函数中的this绑定到这个新对象上  new绑定</span></span><br><span class=\"line\">    <span class=\"comment\">// 3）执行类（函数）中的代码</span></span><br><span class=\"line\">    <span class=\"comment\">// 4）返回上面的新对象</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> f = <span class=\"keyword\">new</span> <span class=\"title class_\">Fn</span>();</span><br></pre></td></tr></table></figure>\n<p>缺点：也会造成空间浪费</p>\n</li>\n<li>\n<p>构造器 + 原型对象创建对象</p>\n</li>\n</ul>\n<p>推荐使用：构造器 + 原型对象</p>\n",
            "tags": [
                "JavaScript"
            ]
        },
        {
            "id": "http://example.com/2022/10/18/js%E9%AB%98%E7%BA%A7/03-JS%E7%9A%84this/",
            "url": "http://example.com/2022/10/18/js%E9%AB%98%E7%BA%A7/03-JS%E7%9A%84this/",
            "title": "JS的this",
            "date_published": "2022-10-18T11:59:01.000Z",
            "content_html": "<h2 id=\"this\"><a class=\"markdownIt-Anchor\" href=\"#this\">#</a> this</h2>\n<h3 id=\"this是什么\"><a class=\"markdownIt-Anchor\" href=\"#this是什么\">#</a> this 是什么</h3>\n<ul>\n<li>this 到底是什么和你书写的位置没有关系，和调用方式有关系</li>\n<li>this 是在产生 EC 时，动态绑定的</li>\n</ul>\n<h3 id=\"this的绑定规则\"><a class=\"markdownIt-Anchor\" href=\"#this的绑定规则\">#</a> this 的绑定规则</h3>\n<ul>\n<li>\n<p><strong>函数的角色</strong></p>\n<ul>\n<li>\n<p>普通函数</p>\n</li>\n<li>\n<p>对象中的方法</p>\n</li>\n<li>\n<p>对象（一切都是对象）  对象是属性的无序集合</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">gn</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;gn...&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// dir表示以对象有形式打印出函数</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">dir</span>(gn);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>函数也是类（构造函数 / 构造器），通常情况下，首字母大写</p>\n</li>\n</ul>\n</li>\n<li>\n<p>默认绑定</p>\n<p>独立调用则直接输出 window</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">       <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>);  <span class=\"comment\">// window</span></span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">   <span class=\"keyword\">function</span> <span class=\"title function_\">gn</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">       <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>);  <span class=\"comment\">// window</span></span><br><span class=\"line\">       <span class=\"title function_\">fn</span>();  <span class=\"comment\">// 独立函数调用</span></span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">   <span class=\"keyword\">function</span> <span class=\"title function_\">kn</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">       <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>);  <span class=\"comment\">// window</span></span><br><span class=\"line\">       <span class=\"title function_\">gn</span>();  <span class=\"comment\">// 独立函数调用</span></span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"comment\">// 独立函数调用</span></span><br><span class=\"line\"> <span class=\"title function_\">kn</span>();</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>隐式绑定</p>\n<ul>\n<li>\n<p>一个函数中的 this 是什么，就看谁去调用了这个函数</p>\n</li>\n<li>\n<p>obj 打点去调用了，函数中的 this 表示 obj</p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">\t<span class=\"attr\">name</span>:<span class=\"string\">&quot;wc&quot;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">fn</span>:fn</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 不叫独立的函数调用</span></span><br><span class=\"line\"><span class=\"comment\">// 是通过obj打点去调用的</span></span><br><span class=\"line\"><span class=\"comment\">// fn中的this表示什么，就看点前面是什么</span></span><br><span class=\"line\"><span class=\"comment\">// 点前面是obj，this就是obj</span></span><br><span class=\"line\">obj.<span class=\"title function_\">fn</span>();<span class=\"comment\">//obj</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">    <span class=\"attr\">name</span>:<span class=\"string\">&quot;wc&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">fn</span>:<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> obj2 = &#123;</span><br><span class=\"line\">    <span class=\"attr\">name</span>:<span class=\"string\">&quot;xq&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">gn</span>:obj.<span class=\"property\">fn</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">obj2.<span class=\"title function_\">gn</span>(); <span class=\"comment\">//obj2</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>显示绑定</p>\n<ul>\n<li>\n<p>函数也是一个对象，对象是属性的无序集合，内部有非常多的默认属性或方法，重点关注三个方法，call，apply，bind</p>\n</li>\n<li>\n<p>call</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\">num1,num2</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>, num1 + num2);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;wc&quot;</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 函数也是对象，call是它内部的一个方法</span></span><br><span class=\"line\"><span class=\"comment\">// 我们直接去调用这个方法</span></span><br><span class=\"line\"><span class=\"comment\">// 此方法，可以让我们显示地绑定this</span></span><br><span class=\"line\"><span class=\"comment\">// call的作用：1）显示绑定this  2）让fn执行 3）也可以传递</span></span><br><span class=\"line\">fn.<span class=\"title function_\">call</span>(obj,<span class=\"number\">666</span>,<span class=\"number\">111</span>);  <span class=\"comment\">// 显示绑定函数中的this</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>apply</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\">num1, num2</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>, num1 + num2);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;wc&quot;</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// apply的作用和call一样，只不过传参的方式不一样</span></span><br><span class=\"line\"><span class=\"comment\">// apply的话，需要把参数放到一个数组中</span></span><br><span class=\"line\">fn.<span class=\"title function_\">apply</span>(obj, [<span class=\"number\">666</span>, <span class=\"number\">111</span>]);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>bind</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\">num1, num2</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>, num1 + num2);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;wc&quot;</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// bind的作用：1）显示绑定this  2）也可以传参   但是不会让函数执行，call和apply都会让函数执行  3）bind返回绑定this之后的新函数</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> newFn = fn.<span class=\"title function_\">bind</span>(obj, <span class=\"number\">666</span>, <span class=\"number\">111</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">newFn</span>();</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>总结</p>\n<ul>\n<li>call  fn.call (obj,1,2)  显示绑定 this  让 fn 执行  也能传参</li>\n<li>apply  fn.apply (obj,[1,2])  显示绑定 this  让 fn 执行  参数放数组中</li>\n<li>bind  fn.bind (obj,1,2)  显示绑定 this  返回绑定 this 后的新函数  也能传参</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// String &#123;&#x27;hello&#x27;&#125;  是一个对象</span></span><br><span class=\"line\"><span class=\"comment\">//  会把hello包装成一个对象</span></span><br><span class=\"line\"><span class=\"comment\">// fn.call(&quot;hello&quot;);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 如果绑定到und上，实际是绑定到了window上</span></span><br><span class=\"line\"><span class=\"comment\">// fn.call(undefined);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 如果绑定到null上，实际是绑定到了window上</span></span><br><span class=\"line\">fn.<span class=\"title function_\">call</span>(<span class=\"literal\">null</span>)</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li>\n<p>new 绑定</p>\n<ul>\n<li>\n<p>new 做了什么</p>\n<ul>\n<li>在函数内部创建一个对象</li>\n<li>把函数内的 this 绑定到了对象上</li>\n<li>函数执行</li>\n<li>返回这个对象（new 完后，肯定是得到一个对象）</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Person</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = <span class=\"string\">&quot;wc&quot;</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">age</span> = <span class=\"number\">100</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// new一个类，得到一个对象  new是一个运算符</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> p1 = <span class=\"keyword\">new</span> <span class=\"title class_\">Person</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(p1);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li>\n<p>内置函数绑定</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 定时器中的this表示window</span></span><br><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">&#125;,<span class=\"number\">2000</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span>点我<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">let</span> btn = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;btn&quot;</span>);</span><br><span class=\"line\">btn.<span class=\"property\">onclick</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 监听器中的this表示事件源</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"绑定优先级\"><a class=\"markdownIt-Anchor\" href=\"#绑定优先级\">#</a> 绑定优先级</h3>\n<ul>\n<li>显示 &gt; 隐式</li>\n<li>new &gt; 隐式</li>\n<li>new &gt; bind</li>\n<li>new 绑定 不能和 call 与 apply 比较（因为 call 和 apply 执行了）</li>\n</ul>\n<h2 id=\"箭头函数\"><a class=\"markdownIt-Anchor\" href=\"#箭头函数\">#</a> 箭头函数</h2>\n<h3 id=\"箭头函数书写方法\"><a class=\"markdownIt-Anchor\" href=\"#箭头函数书写方法\">#</a> 箭头函数书写方法</h3>\n<ul>\n<li>\n<p>普通写法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title function_\">foo</span> =  (<span class=\"params\">num1, num2</span>) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> num1 + num2;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>形参只有 1 个，那么 () 可以不写</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title function_\">foo</span> = num1 =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> num1*<span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>函数体中只有一条语句，{} 和 return 都可以不写</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title function_\">foo</span> = num1 =&gt; num1 * <span class=\"number\">2</span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>函数体中只有一条语句，没有 reutrn，{} 也是可以不写的</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title function_\">foo</span> = num1 =&gt; <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(num1 ** <span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>函数体中只有一条语句，并且返回一个对象  删除 return 和 {}，对象的 {} 会当成函数的 {}，如果没有形参 () 不能省</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title function_\">foo</span> = (<span class=\"params\"></span>) =&gt; (&#123; <span class=\"attr\">a</span>: <span class=\"number\">666</span> &#125;)</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"箭头函数特点\"><a class=\"markdownIt-Anchor\" href=\"#箭头函数特点\">#</a> 箭头函数特点</h3>\n<ul>\n<li>箭头函数中的 this 需要往向找一层</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>);<span class=\"comment\">//window</span></span><br><span class=\"line\">&#125;,<span class=\"number\">2000</span>)</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "JavaScript",
                "this"
            ]
        },
        {
            "id": "http://example.com/2022/10/18/js%E9%AB%98%E7%BA%A7/02-%E5%8F%98%E9%87%8F%E5%92%8C%E9%97%AD%E5%8C%85/",
            "url": "http://example.com/2022/10/18/js%E9%AB%98%E7%BA%A7/02-%E5%8F%98%E9%87%8F%E5%92%8C%E9%97%AD%E5%8C%85/",
            "title": "变量和闭包",
            "date_published": "2022-10-18T10:18:01.000Z",
            "content_html": "<h3 id=\"var变量加与不加的区别\"><a class=\"markdownIt-Anchor\" href=\"#var变量加与不加的区别\">#</a> Var 变量加与不加的区别</h3>\n<ul>\n<li>\n<p>加 var 在预编译期间会提升，不加 var 不会</p>\n</li>\n<li>\n<p>不管是否加 var，只要全局变量，在非严格模式下，都会挂载到 GO 上</p>\n</li>\n<li>\n<p>加 var 的变量，可以做全局变量，也可以做局部变量，没有加 var 只能做全局变量</p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a);</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">110</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">a</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// console.log(b);</span></span><br><span class=\"line\">b = <span class=\"number\">666</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">b</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"let\"><a class=\"markdownIt-Anchor\" href=\"#let\">#</a> let</h3>\n<ul>\n<li>\n<p>项目开发中，基本上都是清一色的 let</p>\n</li>\n<li>\n<p>let 是 ES6 中提出来，弥补了 var 声明变量的缺点</p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    <span class=\"comment\">// ReferenceError: Cannot access &#x27;a&#x27; before initialization</span></span><br><span class=\"line\">    <span class=\"comment\">// a没有初始化（赋值），是不能访问的</span></span><br><span class=\"line\">    <span class=\"comment\">// 理解成：使用let声明的变量是没有提升</span></span><br><span class=\"line\">    <span class=\"comment\">// 理解成：使用let声明的变量提升了，但是没有赋值，没有赋值是不能直接访问的</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> a = <span class=\"number\">110</span>;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"comment\">// let+&#123;&#125;可以形成块级作用域</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"keyword\">if</span>(<span class=\"literal\">true</span>)&#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">        <span class=\"comment\">// let + &#123;&#125; 形成块级作用域</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">        <span class=\"comment\">// 块级作用域中定义的变量，只能在块中使用</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">        <span class=\"comment\">// 出了这个块，就不能使用了</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">        <span class=\"keyword\">let</span> c = <span class=\"number\">110</span>;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(c);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span> --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"comment\">// 使用let声明的变量，并不会挂载到GO上</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"keyword\">let</span> a = <span class=\"number\">110</span>;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">a</span>);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"comment\">//  SyntaxError: Identifier &#x27;a&#x27; has already been declared </span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"keyword\">let</span> a = <span class=\"number\">1</span>;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"keyword\">let</span> a = <span class=\"number\">2</span>;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<h3 id=\"const\"><a class=\"markdownIt-Anchor\" href=\"#const\">#</a> const</h3>\n<ul>\n<li>\n<p>使用 const 声明变量（常量）的特点：</p>\n<p>​    1）声明的变量不能修改</p>\n<p>​    2）使用 const 声明变量时，必须赋值，不然会报语法错误</p>\n<p>​    3）const 声明的变量也不会提升</p>\n<p>​    4）const 和 {} 也可以形成块级作用域</p>\n<p>​    5）const 声明的变量也不会挂载到 GO 上</p>\n</li>\n<li>\n<p>在项目中，定义变量使用 let，定义常量，使用 const</p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"variable constant_\">PI</span> = <span class=\"number\">3.14</span>;</span><br><span class=\"line\">    <span class=\"variable constant_\">PI</span> = <span class=\"number\">666</span>; <span class=\"comment\">// TypeError: Assignment to constant variable.</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable constant_\">PI</span>);</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"comment\">// SyntaxError: Missing initializer in const declaration</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"keyword\">const</span> <span class=\"variable constant_\">PI</span>;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"variable constant_\">PI</span> = <span class=\"number\">3.14</span>;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable constant_\">PI</span>);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<h3 id=\"列子\"><a class=\"markdownIt-Anchor\" href=\"#列子\">#</a> 列子</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">fn</span>();</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123; <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">1</span>); &#125;</span><br><span class=\"line\"><span class=\"title function_\">fn</span>();</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123; <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">2</span>); &#125;</span><br><span class=\"line\"><span class=\"title function_\">fn</span>();</span><br><span class=\"line\"><span class=\"keyword\">var</span> fn = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123; <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">3</span>); &#125;</span><br><span class=\"line\"><span class=\"title function_\">fn</span>();</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123; <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">4</span>); &#125;</span><br><span class=\"line\"><span class=\"title function_\">fn</span>();</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123; <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">5</span>); &#125;</span><br><span class=\"line\"><span class=\"title function_\">fn</span>();</span><br><span class=\"line\"><span class=\"comment\">//输出为5,5,5,3,3,3</span></span><br></pre></td></tr></table></figure>\n<p>上述列子中，fn 被整体提升，前面三个输出 5，在第四个 fn 之前进行 fn 赋值，输出都是 3</p>\n<h2 id=\"闭包\"><a class=\"markdownIt-Anchor\" href=\"#闭包\">#</a> 闭包</h2>\n<ul>\n<li>一个不能被回收释放掉的栈空间成为闭包。</li>\n<li>有些不能被回收的闭包会造成内存空间泄露。</li>\n<li>作用\n<ul>\n<li>保护  保护 EC 中的变量，外界不能直接访问</li>\n<li>保存  可以让我们像使用全局变量那样使用局部变量，延长变量的生命周期</li>\n</ul>\n</li>\n</ul>\n<p><img data-src=\"./../../image/10-%E5%BC%95%E5%87%BA%E9%97%AD%E5%8C%85.png\" alt=\"10-引出闭包\"></p>\n<h4 id=\"闭包典型题\"><a class=\"markdownIt-Anchor\" href=\"#闭包典型题\">#</a> 闭包典型题</h4>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> i = <span class=\"number\">20</span>;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    i -= <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> i = <span class=\"number\">10</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">function</span> (<span class=\"params\">n</span>) &#123;</span><br><span class=\"line\">    \t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>((++i) - n);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> f = <span class=\"title function_\">fn</span>();</span><br><span class=\"line\"><span class=\"title function_\">f</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"title function_\">f</span>(<span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"title function_\">fn</span>()(<span class=\"number\">3</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(i);</span><br><span class=\"line\"><span class=\"comment\">//10 10 8 20</span></span><br></pre></td></tr></table></figure>\n<p><img data-src=\"./../../image/12-%E9%97%AD%E5%8C%85%E7%BB%83%E4%B9%A0%E9%A2%98.png\" alt=\"12-闭包练习题\"></p>\n",
            "tags": [
                "JavaScript"
            ]
        },
        {
            "id": "http://example.com/2022/10/17/%E7%AE%97%E6%B3%95/Dijkstra%E5%8D%95%E6%BA%90%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E7%AE%97%E6%B3%95/",
            "url": "http://example.com/2022/10/17/%E7%AE%97%E6%B3%95/Dijkstra%E5%8D%95%E6%BA%90%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E7%AE%97%E6%B3%95/",
            "title": "Dijkstra单源最短路径算法",
            "date_published": "2022-10-17T13:51:03.000Z",
            "content_html": "<h2 id=\"单源最短路径问题\"><a class=\"markdownIt-Anchor\" href=\"#单源最短路径问题\">#</a> 单源最短路径问题</h2>\n<h3 id=\"问题描述\"><a class=\"markdownIt-Anchor\" href=\"#问题描述\">#</a> 问题描述</h3>\n<p>给定一个带权有向图 G=（V,E），其中每条边的权是一个实数。另外，还给定 V 中的一个顶点，称为源。要计算从源到其他所有各顶点的<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5jc2RuLm5ldC9zby9zZWFyY2g/cT0lRTYlOUMlODAlRTclOUYlQUQlRTglQjclQUYlRTUlQkUlODQmYW1wO3NwbT0xMDAxLjIxMDEuMzAwMS43MDIw\">最短路径</span>长度。这里的长度就是指路上各边权之和。这个问题通常称为单源最短路径问题。</p>\n<h3 id=\"dijkstra算法简介\"><a class=\"markdownIt-Anchor\" href=\"#dijkstra算法简介\">#</a> Dijkstra 算法简介</h3>\n<p>迪杰斯特拉算法 (Dijkstra)，是从一个顶点到其余各顶点的最短路径算法，解决的是有权图中最短路径问题。迪杰斯特拉算法主要特点是从起始点开始，采用<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5jc2RuLm5ldC9zby9zZWFyY2g/cT0lRTglQjQlQUElRTUlQkYlODMlRTclQUUlOTclRTYlQjMlOTUmYW1wO3NwbT0xMDAxLjIxMDEuMzAwMS43MDIw\">贪心算法</span>的策略，每次遍历到始点距离最近且未访问过的顶点的邻接节点，直到扩展到终点为止。</p>\n<h3 id=\"算法分析\"><a class=\"markdownIt-Anchor\" href=\"#算法分析\">#</a> 算法分析</h3>\n<p>伪代码描述</p>\n<p><img data-src=\"./../../image/6-1666018070046-21.png\" alt=\"6\"></p>\n<h3 id=\"数据结构\"><a class=\"markdownIt-Anchor\" href=\"#数据结构\">#</a> 数据结构</h3>\n<ul>\n<li>数据结构：邻接表，数组队列，HashMap（此处没有采用，而是直接遍历查询）</li>\n<li>数据描述：\n<ul>\n<li>邻接表点类\n<ul>\n<li>包含：名称，被指向的权重，链接指针</li>\n<li>作用：邻接表的每个初始点</li>\n</ul>\n</li>\n<li>顶点表结构\n<ul>\n<li>包含：名称，该点的前一个顶点，距离起点距离</li>\n<li>作用：用于生成树的每个节点</li>\n</ul>\n</li>\n<li>邻接表\n<ul>\n<li>对于初始边集和顶点集数据的集合</li>\n<li>初始化时需要将边集的两个顶点都加入指针域</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"源代码ts版\"><a class=\"markdownIt-Anchor\" href=\"#源代码ts版\">#</a> 源代码（TS 版）</h3>\n<p>本算法源码解决的问题是无向图的单源最短路径问题。有向图的类似，只是在生成邻接表时，只生成一个方向。</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//邻接表的点</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">Point</span>&lt;T&gt; &#123;</span><br><span class=\"line\">    <span class=\"attr\">name</span>: T;<span class=\"comment\">//顶点名称</span></span><br><span class=\"line\">    <span class=\"attr\">weight</span>: <span class=\"built_in\">number</span>;<span class=\"comment\">//指向该顶点的边的权重</span></span><br><span class=\"line\">    <span class=\"attr\">next</span>: <span class=\"title class_\">Point</span>&lt;T&gt; | <span class=\"literal\">null</span>;<span class=\"comment\">//下一个邻接顶点</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//顶点表的点</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">Vertex</span>&lt;T&gt; &#123;</span><br><span class=\"line\">    <span class=\"attr\">name</span>: T,<span class=\"comment\">//顶点名称索引</span></span><br><span class=\"line\">    <span class=\"attr\">prePoint</span>: <span class=\"title class_\">Point</span>&lt;T&gt; | <span class=\"literal\">null</span>;<span class=\"comment\">//前一个点</span></span><br><span class=\"line\">    <span class=\"attr\">distance</span>: <span class=\"built_in\">number</span>;<span class=\"comment\">//距离起点的距离</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//邻接表</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Table</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"attr\">table</span>: <span class=\"title class_\">Point</span>&lt;<span class=\"built_in\">number</span>&gt;[];</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"attr\">len</span>: <span class=\"built_in\">number</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title function_\">constructor</span>(<span class=\"params\">vertexSet: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">number</span>&gt;, edgeSet: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">number</span>&gt;&gt;</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">len</span> = vertexSet.<span class=\"property\">length</span>;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">table</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Array</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"title function_\">init</span>(vertexSet, edgeSet);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"title function_\">init</span>(<span class=\"params\">vertexSet: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">number</span>&gt;, edgeSet: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">number</span>&gt;&gt;</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//根据顶点集新建邻接表第一个节点</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"variable language_\">this</span>.<span class=\"property\">len</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">table</span>.<span class=\"title function_\">push</span>(&#123; <span class=\"attr\">name</span>: vertexSet[i], <span class=\"attr\">weight</span>: <span class=\"number\">0</span>, <span class=\"attr\">next</span>: <span class=\"literal\">null</span> &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//根据边集进行关系链接</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; edgeSet.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//根据边集的顺序阿加入</span></span><br><span class=\"line\">            <span class=\"keyword\">let</span> temp = <span class=\"variable language_\">this</span>.<span class=\"property\">table</span>[edgeSet[i][<span class=\"number\">0</span>] - <span class=\"number\">1</span>]</span><br><span class=\"line\">            <span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: edgeSet[i][<span class=\"number\">1</span>], <span class=\"attr\">weight</span>: edgeSet[i][<span class=\"number\">2</span>], <span class=\"attr\">next</span>: <span class=\"literal\">null</span>&#125;                     </span><br><span class=\"line\">            <span class=\"keyword\">while</span>(temp.<span class=\"property\">next</span>) temp = temp.<span class=\"property\">next</span>;</span><br><span class=\"line\">            temp.<span class=\"property\">next</span> = obj;</span><br><span class=\"line\">            <span class=\"comment\">//在加入相反方向的边</span></span><br><span class=\"line\">            temp = <span class=\"variable language_\">this</span>.<span class=\"property\">table</span>[edgeSet[i][<span class=\"number\">1</span>] - <span class=\"number\">1</span>]</span><br><span class=\"line\">            obj = &#123;<span class=\"attr\">name</span>: edgeSet[i][<span class=\"number\">0</span>], <span class=\"attr\">weight</span>: edgeSet[i][<span class=\"number\">2</span>], <span class=\"attr\">next</span>: <span class=\"literal\">null</span>&#125;                     </span><br><span class=\"line\">            <span class=\"keyword\">while</span>(temp.<span class=\"property\">next</span>) temp = temp.<span class=\"property\">next</span>;<span class=\"comment\">//找到下个点</span></span><br><span class=\"line\">            temp.<span class=\"property\">next</span> = obj;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">getTable</span>(): <span class=\"title class_\">Point</span>&lt;<span class=\"built_in\">number</span>&gt;[] &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">table</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">toString</span>(): <span class=\"title class_\">String</span> &#123;   </span><br><span class=\"line\">        <span class=\"keyword\">let</span> <span class=\"attr\">str</span>: <span class=\"title class_\">String</span> = <span class=\"string\">&#x27;&#x27;</span>;   </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"variable language_\">this</span>.<span class=\"property\">len</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> k = <span class=\"number\">1</span>;<span class=\"comment\">//右边括号个数</span></span><br><span class=\"line\">            str += <span class=\"string\">&#x27;&#123; name: &#x27;</span> + <span class=\"variable language_\">this</span>.<span class=\"property\">table</span>[i].<span class=\"property\">name</span> + <span class=\"string\">&#x27;, weight: &#x27;</span> + <span class=\"variable language_\">this</span>.<span class=\"property\">table</span>[i].<span class=\"property\">weight</span> + <span class=\"string\">&#x27;, next: &#x27;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> temp = <span class=\"variable language_\">this</span>.<span class=\"property\">table</span>[i].<span class=\"property\">next</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(temp)&#123;</span><br><span class=\"line\">                str += <span class=\"string\">&#x27;&#123; name: &#x27;</span> + temp.<span class=\"property\">name</span> + <span class=\"string\">&#x27;, weight: &#x27;</span> + temp.<span class=\"property\">weight</span> + <span class=\"string\">&#x27;, next: &#x27;</span>;</span><br><span class=\"line\">                temp = temp.<span class=\"property\">next</span>;</span><br><span class=\"line\">                k++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            str += <span class=\"string\">&#x27;null&#x27;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(k--)&#123;</span><br><span class=\"line\">                str += <span class=\"string\">&#x27; &#125;&#x27;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            str += <span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> str;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//单元最短路径问题（输入顶点s的下标索引）</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">getMinDistance</span>(<span class=\"params\">s: <span class=\"built_in\">number</span></span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 顶点优先队列初始化为空</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> <span class=\"attr\">queue</span>: <span class=\"title class_\">Array</span>&lt;<span class=\"title class_\">Vertex</span>&lt;<span class=\"built_in\">number</span>&gt;&gt; = <span class=\"keyword\">new</span> <span class=\"title class_\">Array</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//将每个顶点入栈，初始化优先级</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i&lt;= <span class=\"variable language_\">this</span>.<span class=\"property\">len</span>; i++) &#123;</span><br><span class=\"line\">            queue.<span class=\"title function_\">push</span>(&#123;<span class=\"attr\">name</span>: i, <span class=\"attr\">prePoint</span>: <span class=\"literal\">null</span>, <span class=\"attr\">distance</span>: <span class=\"title class_\">Infinity</span>&#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//将起点的优先级更新</span></span><br><span class=\"line\">        queue[s].<span class=\"property\">distance</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 定义一个方法：删除优先级最小的元素：即删除distance最小的元素</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> <span class=\"title function_\">deleteMin</span> = (<span class=\"params\">queue: <span class=\"built_in\">Array</span>&lt;Vertex&lt;<span class=\"built_in\">number</span>&gt;&gt;</span>) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(queue.<span class=\"property\">length</span> === <span class=\"number\">0</span>) <span class=\"keyword\">throw</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&#x27;Array is null !&#x27;</span>);</span><br><span class=\"line\">            <span class=\"comment\">// let min = queue.reduce((pre, next) =&gt; &#123; return pre.distance &lt; next.distance ? pre : next&#125;)</span></span><br><span class=\"line\">            <span class=\"keyword\">let</span> min = <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; queue.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(queue[min].<span class=\"property\">distance</span> &gt; queue[i].<span class=\"property\">distance</span>) min = i;</span><br><span class=\"line\">            &#125;   </span><br><span class=\"line\">            <span class=\"keyword\">return</span> queue.<span class=\"title function_\">splice</span>(min, <span class=\"number\">1</span>)[<span class=\"number\">0</span>];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 定义一个方法：树上节点和删除的节点取并集</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> <span class=\"title function_\">unionTree</span> = (<span class=\"params\">tree: <span class=\"built_in\">Array</span>&lt;Vertex&lt;<span class=\"built_in\">number</span>&gt;&gt;, u: Vertex&lt;<span class=\"built_in\">number</span>&gt;</span>) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; tree.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(tree[i].<span class=\"property\">name</span> === u.<span class=\"property\">name</span>) <span class=\"keyword\">return</span>;<span class=\"comment\">//如果是相同点就不合并</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            tree.<span class=\"title function_\">push</span>(u);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 定义一个方法：findIndex</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> <span class=\"title function_\">findIndex</span> = (<span class=\"params\">arr: <span class=\"built_in\">Array</span>&lt;Point&lt;<span class=\"built_in\">number</span>&gt;&gt; | <span class=\"built_in\">Array</span>&lt;Vertex&lt;<span class=\"built_in\">number</span>&gt;&gt;, target: Point&lt;<span class=\"built_in\">number</span>&gt; | Vertex&lt;<span class=\"built_in\">number</span>&gt;</span>) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; arr.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(arr[i].<span class=\"property\">name</span> === target.<span class=\"property\">name</span>) <span class=\"keyword\">return</span> i;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">       </span><br><span class=\"line\">        <span class=\"comment\">//初始树</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> <span class=\"attr\">tree</span>: <span class=\"title class_\">Array</span>&lt;<span class=\"title class_\">Vertex</span>&lt;<span class=\"built_in\">number</span>&gt;&gt; = <span class=\"keyword\">new</span> <span class=\"title class_\">Array</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">        tree.<span class=\"title function_\">push</span>(queue[s]);<span class=\"comment\">//初始树包含一个给定的起点</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"variable language_\">this</span>.<span class=\"property\">len</span> - <span class=\"number\">1</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> u = <span class=\"title function_\">deleteMin</span>(queue);<span class=\"comment\">//删除优先级最小的元素</span></span><br><span class=\"line\">            <span class=\"title function_\">unionTree</span>(tree, u);<span class=\"comment\">//取并集</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//ps:此处应该用HashMap进行索引和name隐射</span></span><br><span class=\"line\">            <span class=\"comment\">//不在tree中，也每个和u相邻的顶点</span></span><br><span class=\"line\">            <span class=\"keyword\">let</span> index = <span class=\"title function_\">findIndex</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">table</span>, u);<span class=\"comment\">//地址映射：从余下顶点到邻接表</span></span><br><span class=\"line\">            <span class=\"comment\">// let index = u.name - 1;</span></span><br><span class=\"line\">            <span class=\"keyword\">let</span> temp = <span class=\"variable language_\">this</span>.<span class=\"property\">table</span>[index];<span class=\"comment\">//邻接表中的u点</span></span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"keyword\">while</span>(temp.<span class=\"property\">next</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">let</span> t = temp.<span class=\"property\">next</span></span><br><span class=\"line\">                index = <span class=\"title function_\">findIndex</span>(queue, t);<span class=\"comment\">//地址映射：从邻接表到余下顶点</span></span><br><span class=\"line\">                <span class=\"comment\">// index = t.name - 1;</span></span><br><span class=\"line\">                <span class=\"comment\">// console.log(index, queue[index]);</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(index !== -<span class=\"number\">1</span>) &#123;<span class=\"comment\">//不在树上</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(u.<span class=\"property\">distance</span> + temp.<span class=\"property\">weight</span> &lt; queue[index].<span class=\"property\">distance</span>)&#123;</span><br><span class=\"line\">                        queue[index].<span class=\"property\">distance</span> = u.<span class=\"property\">distance</span> + t.<span class=\"property\">weight</span>;<span class=\"comment\">//刷新最短距离</span></span><br><span class=\"line\">                        queue[index].<span class=\"property\">prePoint</span> = t;<span class=\"comment\">//刷新前驱节点</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;              </span><br><span class=\"line\">                </span><br><span class=\"line\">                temp = t;<span class=\"comment\">//遍历所有的相邻点</span></span><br><span class=\"line\">            &#125;                 </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//并上最后一个</span></span><br><span class=\"line\">        <span class=\"title function_\">unionTree</span>(tree, queue[<span class=\"number\">0</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> tree;        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//测试代码</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"attr\">vertexSet</span>: <span class=\"title class_\">Array</span>&lt;<span class=\"built_in\">number</span>&gt; = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>];<span class=\"comment\">//顶点集</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"attr\">edgeSet</span>: <span class=\"title class_\">Array</span>&lt;<span class=\"title class_\">Array</span>&lt;<span class=\"built_in\">number</span>&gt;&gt; = [[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], [<span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"number\">7</span>], [<span class=\"number\">2</span>, <span class=\"number\">4</span>, <span class=\"number\">2</span>], [<span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>], [<span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>], [<span class=\"number\">3</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>], [<span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">4</span>]]; <span class=\"comment\">// 顶点 顶点 权值  //边集</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> table = <span class=\"keyword\">new</span> <span class=\"title class_\">Table</span>(vertexSet, edgeSet);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(table.<span class=\"title function_\">toString</span>());</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(table.<span class=\"title function_\">getMinDistance</span>(<span class=\"number\">1</span>));</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "Dijkstra"
            ]
        },
        {
            "id": "http://example.com/2022/10/17/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/hexo%E5%92%8CTypora%E4%B8%AD%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87/",
            "url": "http://example.com/2022/10/17/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/hexo%E5%92%8CTypora%E4%B8%AD%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87/",
            "title": "hexo和Typora中插入图片",
            "date_published": "2022-10-17T13:39:01.000Z",
            "content_html": "<h2 id=\"hexo与typora完美结合插入图片方便\"><a class=\"markdownIt-Anchor\" href=\"#hexo与typora完美结合插入图片方便\">#</a> hexo 与 Typora 完美结合：插入图片方便</h2>\n<ul>\n<li>\n<p>安装插件 hexo-renderer-marked</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-renderer-marked</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>在 config.yml 中修改配置如下</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">post_asset_folder:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>在 config.yml 中添加配置如下</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">marked:</span></span><br><span class=\"line\">  <span class=\"attr\">prependRoot:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">postAsset:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>在 source 文件中创建一个文件夹来存储图片，我这里创建的文件名为 image（不要再主题的 source 文件夹下创建），如下</p>\n<p><img data-src=\"./../../image/1.png\" alt=\"1\"></p>\n</li>\n<li>\n<p>打开 typora: 文件 -&gt; 偏好设置 -&gt; 图像，选择复制到指定路径 -&gt; 点开文件图标，选择刚刚创建的 “image”（自己创建的存储图片的文件）文件 -&gt; 勾选如图下的四个勾选，版本不同可能不同，如图下：</p>\n<p><img data-src=\"./../../image/2-1666019273231-4.png\" alt=\"2\"></p>\n</li>\n<li>\n<p>接下来在用 typora 时，右键点击导入或者直接拖动图片直接复制进来进好啦会进行自动复制配置在你的 image 下了，此时已经可以正常使用了，如果本地使用 <strong>hexo s</strong> 命令后发现并没有成功，请看下一步。</p>\n</li>\n<li>\n<p>大概率可能是命名重复，需要手动点击设置。</p>\n</li>\n<li>\n<p>需要在 Typora 中右击图片选择复制到 image</p>\n<p><img data-src=\"./../../image/3-1666019418250-12.png\" alt=\"3\"></p>\n</li>\n<li>\n<p>大功告成！</p>\n</li>\n</ul>\n<h5 id=\"参考文章hexo博客如何插入图片-知乎-zhihucom\"><a class=\"markdownIt-Anchor\" href=\"#参考文章hexo博客如何插入图片-知乎-zhihucom\">#</a> 参考文章：<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yNjUwNzc0Njg=\">hexo 博客如何插入图片 - 知乎 (zhihu.com)</span></h5>\n",
            "tags": [
                "hexo",
                "Typora"
            ]
        },
        {
            "id": "http://example.com/2022/10/17/js%E9%AB%98%E7%BA%A7/01-EC%E5%92%8CJS%E6%89%A7%E8%A1%8C/",
            "url": "http://example.com/2022/10/17/js%E9%AB%98%E7%BA%A7/01-EC%E5%92%8CJS%E6%89%A7%E8%A1%8C/",
            "title": "JavaScript预编辑",
            "date_published": "2022-10-17T10:40:29.000Z",
            "content_html": "<p>JavaScript 运行分为预编译和代码执行运行</p>\n<h3 id=\"预编译\"><a class=\"markdownIt-Anchor\" href=\"#预编译\">#</a> 预编译</h3>\n<p>预编译也叫预解析</p>\n<p>做了什么？</p>\n<pre><code>- 声明要提升 会先进行var和function的定义提升（只提升声明，而没有赋值，放在代码块最前面）\n- 函数内部局部变量，要提升到函数内部最前面\n</code></pre>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">        <span class=\"comment\">// 预编译会先进行var和function的定义提升</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> a = <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"title function_\">fn</span>()</span><br><span class=\"line\">        <span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> b = <span class=\"number\">2</span></span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a); <span class=\"comment\">//undefind</span></span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(b); <span class=\"comment\">//2</span></span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(c); <span class=\"comment\">//und</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> a = <span class=\"number\">3</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> c = <span class=\"number\">4</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"运行执行\"><a class=\"markdownIt-Anchor\" href=\"#运行执行\">#</a> 运行执行</h3>\n<p>执行运行就是运行预编译后的 js 代码，现将所有的声明和函数执行后，运行代码块。</p>\n<h3 id=\"区\"><a class=\"markdownIt-Anchor\" href=\"#区\">#</a> 区</h3>\n<ul>\n<li>内存分为两个区：堆区和栈区</li>\n<li>栈区：存储基本数据类型</li>\n<li>栈区：存储引用数据类型</li>\n</ul>\n<h3 id=\"javascript代码类型\"><a class=\"markdownIt-Anchor\" href=\"#javascript代码类型\">#</a> JavaScript 代码类型</h3>\n<ul>\n<li>全局代码：script 标签都是全局代码</li>\n<li>函数代码：每一个函数都是一个代码块</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//全局代码</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//局部代码</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> c = <span class=\"number\">3</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> d = <span class=\"number\">4</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"javascript代码执行\"><a class=\"markdownIt-Anchor\" href=\"#javascript代码执行\">#</a> JavaScript 代码执行</h3>\n<h4 id=\"定义\"><a class=\"markdownIt-Anchor\" href=\"#定义\">#</a> 定义</h4>\n<ul>\n<li>\n<p>JS 执行时，堆内存创建一个全局对象（GO）</p>\n</li>\n<li>\n<p>全局代码执行时，产生全局执行上下文（ECG）</p>\n</li>\n<li>\n<p>调用一个函数，产生一个局部执行上下文（EC）</p>\n</li>\n<li>\n<p>执行上下文产生放在栈中，栈叫做执行上下文栈（ECS）</p>\n</li>\n</ul>\n<p>EC：给代码提供数据</p>\n<p>GO：也是就 window 对象</p>\n<p><img data-src=\"./../../image/01-ECG%EF%BC%8CGO%EF%BC%8CECFn.png\" alt=\"01-ECG，GO，ECFn\"></p>\n<h4 id=\"执行步骤\"><a class=\"markdownIt-Anchor\" href=\"#执行步骤\">#</a> 执行步骤</h4>\n<p>执行代码开始，会将 GO 挂载</p>\n<p>①执行全局代码，产上 ECG，入 ECS</p>\n<p>②执行局部代码，产生 EC，入 ECS</p>\n<p>③出栈，一次出 EC * N ,ECG</p>\n<p><img data-src=\"E:%5CCode%5C%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%5CJavaScript%5Cjs%E9%AB%98%E7%BA%A7%5Cjs%5C1.png\" alt=\"\"></p>\n",
            "tags": [
                "JavaScript"
            ]
        },
        {
            "id": "http://example.com/2022/09/15/%E7%AE%97%E6%B3%95/algorithm-01-%E7%AE%97%E6%B3%95%E5%A2%9E%E9%95%BF/",
            "url": "http://example.com/2022/09/15/%E7%AE%97%E6%B3%95/algorithm-01-%E7%AE%97%E6%B3%95%E5%A2%9E%E9%95%BF/",
            "title": "algorithm-01-算法增长",
            "date_published": "2022-09-15T06:03:03.000Z",
            "content_html": "<h3 id=\"渐进符号\"><a class=\"markdownIt-Anchor\" href=\"#渐进符号\">#</a> 渐进符号</h3>\n<ul>\n<li>作用：衡量算法增长效率</li>\n<li>类型：\n<ul>\n<li>O：上届</li>\n<li>seta：下界</li>\n<li>欧姆：等价</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"分治思想\"><a class=\"markdownIt-Anchor\" href=\"#分治思想\">#</a> 分治思想</h3>\n<h2 id=\"递归\"><a class=\"markdownIt-Anchor\" href=\"#递归\">#</a> 递归</h2>\n<ul>\n<li>概念：</li>\n<li>例子：<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">F</span>(<span class=\"params\">n</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(n === <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> <span class=\"title function_\">F</span>(n-<span class=\"number\">1</span>) * n</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>常见递归类型\n<ul>\n<li>减一算法<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">T</span>(n) = <span class=\"title function_\">T</span>(n-<span class=\"number\">1</span>) + <span class=\"title function_\">f</span>(n)</span><br></pre></td></tr></table></figure>\n</li>\n<li>减常因子算法<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">T</span>(n) = <span class=\"title function_\">T</span>(n/b) + <span class=\"title function_\">f</span>(n)</span><br></pre></td></tr></table></figure>\n</li>\n<li>分治算法\n<ul>\n<li>将大规模的问题分解成小问题逐一击破</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">T</span>(n) = <span class=\"title function_\">aT</span>(n/b) + <span class=\"title function_\">f</span>(n)</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/09/13/flutter/flutter-01-introduce/",
            "url": "http://example.com/2022/09/13/flutter/flutter-01-introduce/",
            "title": "flutter-01-introduce",
            "date_published": "2022-09-13T08:37:55.000Z",
            "content_html": "<h2 id=\"flutter特点\"><a class=\"markdownIt-Anchor\" href=\"#flutter特点\">#</a> Flutter 特点</h2>\n<ul>\n<li>\n<p>多平台支持 iOS Android Linux 未来 Fuchsia OS</p>\n</li>\n<li>\n<p>原生用户界面</p>\n</li>\n<li>\n<p>120fps 超高性能</p>\n</li>\n<li>\n<p>两套成熟 UI 库 Material Design 和 Cupertino</p>\n</li>\n<li>\n<p>响应式的框架 Redux、RxDart、BloC 业务和 UI 分离</p>\n</li>\n<li>\n<p>Flutter 支持 Hot Reload</p>\n</li>\n<li>\n<p>国内阿里咸鱼、腾讯、京东、国外的谷歌等公司都已经有上线产品在使用 Flutter 开发</p>\n</li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/09/13/%E7%BD%91%E7%BB%9C%E5%89%8D%E6%B2%BF%E5%AE%89%E5%85%A8%E6%8A%80%E6%9C%AF/%E5%AF%86%E7%A0%81%E5%AD%A6%E7%AE%80%E8%BF%B0/",
            "url": "http://example.com/2022/09/13/%E7%BD%91%E7%BB%9C%E5%89%8D%E6%B2%BF%E5%AE%89%E5%85%A8%E6%8A%80%E6%9C%AF/%E5%AF%86%E7%A0%81%E5%AD%A6%E7%AE%80%E8%BF%B0/",
            "title": "密码学简述",
            "date_published": "2022-09-13T06:22:03.000Z",
            "content_html": "<h2 id=\"对称密码学\"><a class=\"markdownIt-Anchor\" href=\"#对称密码学\">#</a> 对称密码学</h2>\n<h3 id=\"古典\"><a class=\"markdownIt-Anchor\" href=\"#古典\">#</a> 古典</h3>\n<ul>\n<li>概述\n<ul>\n<li>加密和解密使用相同的密匙</li>\n<li>密匙使用秘密的渠道进行接送</li>\n</ul>\n</li>\n<li>加密算法特征\n<ul>\n<li><strong>其加密密钥与解密密钥相同或很容易相互推算出来</strong></li>\n<li><strong>整个通讯的安全性依赖于密钥的保密，而不是算法的保密</strong></li>\n</ul>\n</li>\n<li>优缺点\n<ul>\n<li>优点：加密速度快，计算量小、加密效率高，硬件容易实现和大规模生产</li>\n<li>缺点：密钥的分发与管理比较困难，当通信的人数 增加时，密钥数目急剧膨胀</li>\n</ul>\n</li>\n<li>扩散和混乱\n<ul>\n<li>混乱：密文和密钥之间的统计关系变得尽可能复杂，使得攻击无法得到密匙\n<ul>\n<li>混乱方法：<em><strong>多次迭代</strong></em></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"des算法\"><a class=\"markdownIt-Anchor\" href=\"#des算法\">#</a> DES 算法</h2>\n<ul>\n<li>一种对称加密算法，体制公开，安全性完全依赖密钥，密钥是任意 56bits</li>\n<li>安全性：密钥太短只有 56 个比特</li>\n<li>地位：第一个公开密码算法</li>\n<li>增强 DES 加密算法\n<ul>\n<li>DES 缺点是密钥短，使用多个密钥等同于更长的密钥</li>\n<li>三个密钥的三重 DES\n<ul>\n<li>对一个明文进行三次加密解密</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"idea估计数据加密算法\"><a class=\"markdownIt-Anchor\" href=\"#idea估计数据加密算法\">#</a> IDEA（估计数据加密算法）</h3>\n<h3 id=\"aes算法高级加密算法\"><a class=\"markdownIt-Anchor\" href=\"#aes算法高级加密算法\">#</a> AES 算法（高级加密算法）</h3>\n<ul>\n<li>长度可变</li>\n</ul>\n<h2 id=\"非对称密码学\"><a class=\"markdownIt-Anchor\" href=\"#非对称密码学\">#</a> 非对称密码学</h2>\n<ul>\n<li>RSA 算法\n<ul>\n<li>安全性是基于大整数素因子分解的困难性</li>\n<li>公钥和私钥是一对大素数 P、Q 的函数，从一个公钥和密文中恢复出明文的难度等价于分解两个大素数之积</li>\n<li n,d=\"\">RSA 算法描述如下：<br>\n1 选择 p,q 为互异素数<br>\n 2 计算 n=p<em>q，(n)=(p-1)</em>(q-1)<br>\n 3 选择整数 e 使 e 与(n) 互质<br>\n 4 计算 d，使满足 d*e=1mod (n)(<strong>≡为同余符号，模运算结果相同</strong>)<br>\n 5  公钥 PK={n,e} 私钥 SK=</li>\n<li>缺陷\n<ul>\n<li>RSA 的重大缺陷是无法从理论上把握它的保密性能如何</li>\n<li>产生密钥很麻烦，受到素数产生技术的限制，因而难以做到一次一密。</li>\n<li>分组长度太大，为保证安全性，n 至少也要 600 bits 以上，使运算代价很高，尤其是速度较慢，较对称密码算法慢几个数量级；且随着大数分解技术的发展，这个长度还在增加，不利于数据格式的标准化。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n",
            "tags": [
                "密码学"
            ]
        },
        {
            "id": "http://example.com/2022/09/09/%E7%BD%91%E7%BB%9C%E5%89%8D%E6%B2%BF%E5%AE%89%E5%85%A8%E6%8A%80%E6%9C%AF/%E5%8F%A4%E5%85%B8%E5%AF%86%E7%A0%81%E5%AD%A6%EF%BC%9A%E5%87%AF%E6%92%92%E5%AF%86%E7%A0%81%E5%92%8C%E7%BB%B4%E5%90%89%E5%B0%BC%E4%BA%9A%E5%AF%86%E7%A0%81/",
            "url": "http://example.com/2022/09/09/%E7%BD%91%E7%BB%9C%E5%89%8D%E6%B2%BF%E5%AE%89%E5%85%A8%E6%8A%80%E6%9C%AF/%E5%8F%A4%E5%85%B8%E5%AF%86%E7%A0%81%E5%AD%A6%EF%BC%9A%E5%87%AF%E6%92%92%E5%AF%86%E7%A0%81%E5%92%8C%E7%BB%B4%E5%90%89%E5%B0%BC%E4%BA%9A%E5%AF%86%E7%A0%81/",
            "title": "古典密码学：凯撒密码和维吉尼亚密码",
            "date_published": "2022-09-09T13:23:29.000Z",
            "content_html": "<h2 id=\"凯撒密码和维吉尼亚密码\"><a class=\"markdownIt-Anchor\" href=\"#凯撒密码和维吉尼亚密码\">#</a> 凯撒密码和维吉尼亚密码</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlODElQkElRTYlOTIlOTIlRTUlQUYlODYlRTclQTAlODEvNDkwNTI4NA==\">凯撒密码</span>是一种比较简单的古典密码，仅仅将明文的每个字符偏移相同的偏移量，从而达到加密的目的。</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTclQkIlQjQlRTUlOTAlODklRTUlQjAlQkMlRTQlQkElOUElRTUlQUYlODYlRTclQTAlODE/ZnJvbU1vZHVsZT1sZW1tYV9zZWFyY2gtYm94\">维吉尼亚密码</span>则是在凯撒密码的基础上演变而来，是使用一系列凯撒密码组成密码字母表的加密算法，属于多表密码的一种简单形式。</p>\n<h2 id=\"本人创建的两种编译器\"><a class=\"markdownIt-Anchor\" href=\"#本人创建的两种编译器\">#</a> 本人创建的两种编译器</h2>\n<p>本人采用 Java 语法编写算法，使用了两种思路来分别编写两种编译器类：CaesarCodeGenerator、VirginiaCodeGenerator</p>\n<ul>\n<li>\n<p>CaesarCodeGenerator 类将明文集合和密文集合定义在内，明文集合固定，而密文集合通过传入的密匙和明文集合生成。加密和解密算法分别将明密文集合一一对应即可达到编译码的功能。</p>\n<ul>\n<li>明密文集合定义如下：</li>\n</ul>\n  <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">MING</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>;<span class=\"comment\">//明文集合</span></span><br><span class=\"line\">   <span class=\"type\">String</span> <span class=\"variable\">MI</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;&quot;</span>;<span class=\"comment\">//密文集合</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"title function_\">CaesarCodeGenerator</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">       <span class=\"built_in\">this</span>.MI = <span class=\"built_in\">this</span>.MING.toUpperCase();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"title function_\">CaesarCodeGenerator</span><span class=\"params\">(<span class=\"type\">char</span> k)</span> &#123;</span><br><span class=\"line\">       <span class=\"built_in\">this</span>();</span><br><span class=\"line\">       <span class=\"built_in\">this</span>.setMI(k);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>VirginiaCodeGenerator 类中加密解密直接完成，没有定义明密文集合或者表完成。</p>\n<ul>\n<li>\n<p>加密算法：对每个明文遍历，获取当前的密匙，然后根据公式（p 为明文，k 为密匙，c 为密文，都为 0~25 的数字） <strong><strong>(p + k) = c</strong></strong> 获取密文，对空格明文跳过。</p>\n</li>\n<li>\n<p>解密算法：对每个密文遍历，获取当前的密匙，然后根据公式（p 为明文，k 为密匙，c 为密文，都为 0~25 的数字） <strong><strong>(c - k) = p</strong></strong> 获取密文。</p>\n</li>\n<li>\n<p>维吉尼亚加密算法如下：</p>\n</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> String <span class=\"title function_\">vigenere_enc</span><span class=\"params\">(String m, String k)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">c</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;&quot;</span>;<span class=\"comment\">//密文</span></span><br><span class=\"line\">    m = m.toUpperCase();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">index</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">char</span> x: m.toCharArray()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(x == <span class=\"string\">&#x27; &#x27;</span>) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"type\">char</span> <span class=\"variable\">ch</span> <span class=\"operator\">=</span> k.charAt(index++);<span class=\"comment\">//获取密匙字母</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(index == k.length()) index = <span class=\"number\">0</span>;<span class=\"comment\">//重置密匙</span></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">key</span> <span class=\"operator\">=</span> Character.isUpperCase(ch) ? ch - <span class=\"string\">&#x27;A&#x27;</span>: ch - <span class=\"string\">&#x27;a&#x27;</span>;<span class=\"comment\">//获取偏移量</span></span><br><span class=\"line\">        c += (<span class=\"type\">char</span>)((x - <span class=\"string\">&#x27;A&#x27;</span> + key) % <span class=\"number\">26</span> + <span class=\"string\">&#x27;A&#x27;</span>);<span class=\"comment\">//求出密文字母</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> c;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>后附完整代码</p>\n<h2 id=\"破译难度\"><a class=\"markdownIt-Anchor\" href=\"#破译难度\">#</a> 破译难度</h2>\n<p>毫无疑问维吉尼亚密码破译是极度困难的，而凯撒密码相对容易。此处不介绍方法，详情见<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01pdGNoZWxsX0Rvbm92YW4vYXJ0aWNsZS9kZXRhaWxzLzEyMzg5ODIxNT9vcHNfcmVxdWVzdF9taXNjPSUyNTdCJTI1MjJyZXF1ZXN0JTI1NUZpZCUyNTIyJTI1M0ElMjUyMjE2NjI3MjUzNzMxNjgwMDE4NjUyOTcwOSUyNTIyJTI1MkMlMjUyMnNjbSUyNTIyJTI1M0ElMjUyMjIwMTQwNzEzLjEzMDEwMjMzNC5wYyUyNTVGYWxsLiUyNTIyJTI1N0QmYW1wO3JlcXVlc3RfaWQ9MTY2MjcyNTM3MzE2ODAwMTg2NTI5NzA5JmFtcDtiaXpfaWQ9MCZhbXA7dXRtX21lZGl1bT1kaXN0cmlidXRlLnBjX3NlYXJjaF9yZXN1bHQubm9uZS10YXNrLWJsb2ctMn5hbGx+Zmlyc3RfcmFua19lY3BtX3YxfnJhbmtfdjMxX2VjcG0tMS0xMjM4OTgyMTUtbnVsbC1udWxsLjE0MiU1RXY0NyU1RWNvbnRyb2xfMSwyMDElNUV2MyU1RWNvbnRyb2xfMSZhbXA7dXRtX3Rlcm09JUU3JUJCJUI0JUU1JTkwJTg5JUU1JUIwJUJDJUU0JUJBJTlBJUU3JUJDJTk2JUU4JUFGJTkxJUU3JUEwJTgxJUU1JTk5JUE4JmFtcDtzcG09MTAxOC4yMjI2LjMwMDEuNDE4Nw==\">维吉尼亚密码破译</span>。</p>\n<h2 id=\"完整代码\"><a class=\"markdownIt-Anchor\" href=\"#完整代码\">#</a> 完整代码</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 1、实现凯撒加密和解密：caesar_enc(m, k)和caesar_dec(c, k)。</span></span><br><span class=\"line\"><span class=\"comment\"> * 参数说明：</span></span><br><span class=\"line\"><span class=\"comment\"> * m：明文字符串，要求只能是字母（可以有空格，加密时删除，不区分大小写）</span></span><br><span class=\"line\"><span class=\"comment\"> * c：密文字符串，要求只能是字母（不区分大小写）</span></span><br><span class=\"line\"><span class=\"comment\"> * k：加密和解密密钥，允许为整数或字母（按0~25对应）</span></span><br><span class=\"line\"><span class=\"comment\"> * 返回值：加密返回密文（大写），解密返回明文（小写）</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * 2、实现维吉尼亚加密和解密：vigenere_enc(m, k)和vigenere_dec(c, k)</span></span><br><span class=\"line\"><span class=\"comment\"> * 参数说明：</span></span><br><span class=\"line\"><span class=\"comment\"> * m：明文字符串，要求只能是字母（可以有空格，加密时删除，不区分大小写）</span></span><br><span class=\"line\"><span class=\"comment\"> * c：密文字符串，要求只能是字母（不区分大小写）</span></span><br><span class=\"line\"><span class=\"comment\"> * k：加密和解密密钥，只能为字母</span></span><br><span class=\"line\"><span class=\"comment\"> * 返回值：加密返回密文（大写），解密返回明文（小写）</span></span><br><span class=\"line\"><span class=\"comment\"> * 注：必须调用凯撒加密和解密。</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 凯撒编译码器</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">CaesarCodeGenerator</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">MING</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>;<span class=\"comment\">//明文集合</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">MI</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;&quot;</span>;<span class=\"comment\">//密文集合</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">CaesarCodeGenerator</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.MI = <span class=\"built_in\">this</span>.MING.toUpperCase();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">CaesarCodeGenerator</span><span class=\"params\">(<span class=\"type\">char</span> k)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>();</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.setMI(k);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取密文集合</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> k</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setMI</span><span class=\"params\">(<span class=\"type\">int</span> k)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">str</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">key</span> <span class=\"operator\">=</span> Character.isDigit(k) ? k - <span class=\"string\">&#x27;0&#x27;</span> : Character.isUpperCase(k) ? k - <span class=\"string\">&#x27;A&#x27;</span> + <span class=\"number\">1</span> : k - <span class=\"string\">&#x27;a&#x27;</span> + <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; MI.length(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (MI.length() - i &lt;= key) &#123;</span><br><span class=\"line\">                str = MI.charAt(i) + str;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                str += MI.charAt(i);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.MI = str;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 加密</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> m 明文</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> k 密匙</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> c 密文</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">caesar_enc</span><span class=\"params\">(String m, <span class=\"type\">char</span> k)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">c</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;&quot;</span>;<span class=\"comment\">//密文</span></span><br><span class=\"line\">        m = m.toLowerCase();</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">char</span> x: m.toCharArray()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(x == <span class=\"string\">&#x27; &#x27;</span>) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            c += MI.charAt(MING.indexOf(x));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> c;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 解密</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> c 密文</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> k 密匙</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 明文</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">caesar_dec</span><span class=\"params\">(String c, <span class=\"type\">char</span> k)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">m</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">        c = c.toUpperCase();</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">char</span> x: c.toCharArray()) &#123;</span><br><span class=\"line\">            m += MING.charAt(MI.indexOf(x));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> m;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 维吉尼亚编译码器</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">VirginiaCodeGenerator</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 加密</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> m 明文</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> k 密匙</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> c 密文</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">vigenere_enc</span><span class=\"params\">(String m, String k)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">c</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;&quot;</span>;<span class=\"comment\">//密文</span></span><br><span class=\"line\">        m = m.toUpperCase();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">index</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">char</span> x: m.toCharArray()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(x == <span class=\"string\">&#x27; &#x27;</span>) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            <span class=\"type\">char</span> <span class=\"variable\">ch</span> <span class=\"operator\">=</span> k.charAt(index++);<span class=\"comment\">//获取密匙字母</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(index == k.length()) index = <span class=\"number\">0</span>;<span class=\"comment\">//重置密匙</span></span><br><span class=\"line\">            <span class=\"type\">int</span> <span class=\"variable\">key</span> <span class=\"operator\">=</span> Character.isUpperCase(ch) ? ch - <span class=\"string\">&#x27;A&#x27;</span>: ch - <span class=\"string\">&#x27;a&#x27;</span>;<span class=\"comment\">//获取偏移量</span></span><br><span class=\"line\">            c += (<span class=\"type\">char</span>)((x - <span class=\"string\">&#x27;A&#x27;</span> + key) % <span class=\"number\">26</span> + <span class=\"string\">&#x27;A&#x27;</span>);<span class=\"comment\">//求出密文字母</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> c;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 解密</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> c 密文</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> k 密匙</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 明文</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">vigenere_dec</span><span class=\"params\">(String c, String k)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">m</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">        c = c.toLowerCase();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">index</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">char</span> x: c.toCharArray()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(x == <span class=\"string\">&#x27; &#x27;</span>) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            <span class=\"type\">char</span> <span class=\"variable\">ch</span> <span class=\"operator\">=</span> k.charAt(index++);<span class=\"comment\">//获取密匙字母</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(index == k.length()) index = <span class=\"number\">0</span>;<span class=\"comment\">//重置密匙</span></span><br><span class=\"line\">            <span class=\"type\">int</span> <span class=\"variable\">key</span> <span class=\"operator\">=</span> Character.isUpperCase(ch) ? ch - <span class=\"string\">&#x27;A&#x27;</span>: ch - <span class=\"string\">&#x27;a&#x27;</span>;<span class=\"comment\">//获取偏移量</span></span><br><span class=\"line\">            m += (<span class=\"type\">char</span>)((x - <span class=\"string\">&#x27;a&#x27;</span> - key) % <span class=\"number\">26</span> + <span class=\"string\">&#x27;a&#x27;</span>);<span class=\"comment\">//求出明文字母</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> m;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"type\">Scanner</span> <span class=\"variable\">in</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Scanner</span>(System.in);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">runCaesar</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">&quot;请输入明文（字符串：字母和空格组成）：&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">m</span> <span class=\"operator\">=</span> in.nextLine();</span><br><span class=\"line\">        System.out.print(<span class=\"string\">&quot;\\n请输入密匙（数字或者字母）：&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">char</span> <span class=\"variable\">k</span> <span class=\"operator\">=</span> in.nextLine().charAt(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">CaesarCodeGenerator</span> <span class=\"variable\">caesar</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">CaesarCodeGenerator</span>(<span class=\"string\">&#x27;3&#x27;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;\\n明文集合：&quot;</span> + caesar.MING);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;密文集合：&quot;</span> + caesar.MI);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;原文：&quot;</span> + m);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">encStr</span> <span class=\"operator\">=</span> caesar.caesar_enc(m, k);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;密文：&quot;</span> + encStr);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">decStr</span> <span class=\"operator\">=</span> caesar.caesar_dec(encStr, k);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;译文：&quot;</span> + decStr);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">runVirginia</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">&quot;请输入明文（字符串：字母和空格组成）：&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">m</span> <span class=\"operator\">=</span> in.nextLine();</span><br><span class=\"line\">        System.out.print(<span class=\"string\">&quot;\\n请输入密匙（单词）：&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">k</span> <span class=\"operator\">=</span> in.next();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">VirginiaCodeGenerator</span> <span class=\"variable\">virginia</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">VirginiaCodeGenerator</span>();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;原文：&quot;</span> + m);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">encStr</span> <span class=\"operator\">=</span> virginia.vigenere_enc(m, k);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;密文：&quot;</span> + encStr);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">decStr</span> <span class=\"operator\">=</span> virginia.vigenere_dec(encStr, k);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;译文：&quot;</span> + decStr);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;--\\t古典编译器\\t--\\n&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;选择编译器：&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;\\t1，凯撒编译码器&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;\\t2，维吉尼亚编译码器&quot;</span>);</span><br><span class=\"line\">        System.out.print(<span class=\"string\">&quot;请选择：&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">option</span> <span class=\"operator\">=</span> in.nextInt();</span><br><span class=\"line\">        System.out.println();</span><br><span class=\"line\">        in.nextLine();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (option) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">1</span>: runCaesar(); <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">2</span>: runVirginia(); <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">default</span>:</span><br><span class=\"line\">                System.out.println(<span class=\"string\">&quot;输入错误！&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>这其实是我密码学的一个平时作业。算法不唯一，凯撒编译器或者维吉尼亚编译器都可以互换算法，此处就只完成其中一种。有问题请指正～</p>\n",
            "tags": [
                "密码学",
                "凯斯密码",
                "维吉尼亚密码"
            ]
        },
        {
            "id": "http://example.com/2022/09/07/react/react%E4%B8%AD%E5%BC%95%E5%85%A5react-redux%E4%BD%BF%E7%94%A8store%E3%80%81sub%E5%8C%85%E8%A3%B9%E5%85%A5%E5%8F%A3render%E5%87%BA%E7%8E%B0%E9%A1%B5%E9%9D%A2%E7%A9%BA%E7%99%BD%E9%97%AE%E9%A2%98/",
            "url": "http://example.com/2022/09/07/react/react%E4%B8%AD%E5%BC%95%E5%85%A5react-redux%E4%BD%BF%E7%94%A8store%E3%80%81sub%E5%8C%85%E8%A3%B9%E5%85%A5%E5%8F%A3render%E5%87%BA%E7%8E%B0%E9%A1%B5%E9%9D%A2%E7%A9%BA%E7%99%BD%E9%97%AE%E9%A2%98/",
            "title": "react中引入react-redux使用subscribe监听入口render出现页面空白问题",
            "date_published": "2022-09-07T15:23:24.000Z",
            "content_html": "<h2 id=\"问题描述\"><a class=\"markdownIt-Anchor\" href=\"#问题描述\">#</a> 问题描述</h2>\n<p>在使用 react-redux 或者 redux 时，需要让 redux 的状态修改改变时通知页面及时更新并渲染页面。于是采用了在 index.js 文件中使用<strong> store.subscribe</strong> 包裹页面的 render，该监听函数可以让<strong> render</strong> 重复渲染。不用担心效率问题，因为有 react 的虚拟 DOM 的<strong> diff 算法</strong>兜底，不会导致页面全部重新渲染。<br>\n代码如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">ReactDOM</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-dom/client&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">App</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./App&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./redux/store&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">store.<span class=\"title function_\">subscribe</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> root = <span class=\"title class_\">ReactDOM</span>.<span class=\"title function_\">createRoot</span>(<span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;root&#x27;</span>));</span><br><span class=\"line\">  root.<span class=\"title function_\">render</span>(</span><br><span class=\"line\">      <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"出现的错误\"><a class=\"markdownIt-Anchor\" href=\"#出现的错误\">#</a> 出现的错误</h2>\n<p>页面出现空白并且没有任何错误提示</p>\n<h2 id=\"解决方案\"><a class=\"markdownIt-Anchor\" href=\"#解决方案\">#</a> 解决方案</h2>\n<p>暂未解决</p>\n",
            "tags": [
                "react",
                "react-redux",
                "redux"
            ]
        },
        {
            "id": "http://example.com/2022/09/06/react/react%E4%B8%8Evue%E7%9A%84%E8%B7%AF%E7%94%B1%E8%BE%A8%E6%9E%90/",
            "url": "http://example.com/2022/09/06/react/react%E4%B8%8Evue%E7%9A%84%E8%B7%AF%E7%94%B1%E8%BE%A8%E6%9E%90/",
            "title": "react与vue的路由辨析",
            "date_published": "2022-09-06T14:25:24.000Z",
            "content_html": "<p>react-router-dom 是 react 中的内置插件</p>\n",
            "tags": [
                "react",
                "vue",
                "react-router-dom",
                "vue-router"
            ]
        },
        {
            "id": "http://example.com/2022/09/06/hello-world/",
            "url": "http://example.com/2022/09/06/hello-world/",
            "title": "第一篇个人博客",
            "date_published": "2022-09-06T08:58:55.921Z",
            "content_html": "<p>该博客使用<span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvLw==\"> Hexo</span> 和 Node 技术进行搭建，主题在 hexo 上面找个一个二次元风主题，大部分内容可以自定义，后续将陆续上传博客中！博客依赖<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRlZS5jb20vdmljdGluL3ZpY3Rpbg==\">码云</span>搭建，更多内容可以进一步关注本人博客内容！</p>\n<h2 id=\"博客发布命令\"><a class=\"markdownIt-Anchor\" href=\"#博客发布命令\">#</a> 博客发布命令</h2>\n<h3 id=\"创建博客\"><a class=\"markdownIt-Anchor\" href=\"#创建博客\">#</a> 创建博客</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;第一篇个人博客&quot;</span></span><br></pre></td></tr></table></figure>\n<p>更多信息: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvd3JpdGluZy5odG1s\">Writing</span></p>\n<h3 id=\"本地运行服务\"><a class=\"markdownIt-Anchor\" href=\"#本地运行服务\">#</a> 本地运行服务</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>更多信息: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvc2VydmVyLmh0bWw=\">Server</span></p>\n<h3 id=\"创建静态文件\"><a class=\"markdownIt-Anchor\" href=\"#创建静态文件\">#</a> 创建静态文件</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>更多信息: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3MvZ2VuZXJhdGluZy5odG1s\">Generating</span></p>\n<h3 id=\"远程发布\"><a class=\"markdownIt-Anchor\" href=\"#远程发布\">#</a> 远程发布</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>更多信息: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvb25lLWNvbW1hbmQtZGVwbG95bWVudC5odG1s\">Deployment</span></p>\n",
            "tags": []
        }
    ]
}