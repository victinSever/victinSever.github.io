{
    "version": "https://jsonfeed.org/version/1",
    "title": "眸光似星辰 • All posts by \"mockjs\" category",
    "description": "",
    "home_page_url": "http://victinSever.github.io",
    "items": [
        {
            "id": "http://victinsever.github.io/2023/01/11/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/mockjs/mockjs%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/",
            "url": "http://victinsever.github.io/2023/01/11/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/mockjs/mockjs%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/",
            "title": "mockjs学习笔记",
            "date_published": "2023-01-11T04:42:01.000Z",
            "content_html": "<h4 id=\"环境配置\"><a href=\"#环境配置\" class=\"headerlink\" title=\"环境配置\"></a>环境配置</h4><p>在命令行终端中：</p>\n<ul>\n<li><p>初始化package.json</p>\n<figure class=\"highlight js\"><figcaption><span>初始化package.json</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init -y</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>下载mockjs</p>\n<figure class=\"highlight js\"><figcaption><span>下载mockjs</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i mockjs --save</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>添加node运行指令</p>\n<p>在package.json的scripts中添加</p>\n<blockquote>\n<p> “start”: “node 运行的js文件名”</p>\n</blockquote>\n</li>\n<li><p>下载nodemon预编译node插件</p>\n<figure class=\"highlight js\"><figcaption><span>下载nodemon预编译node插件</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node i nodemon -save-dev</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>运行的js编写mock的模拟数据</p>\n<figure class=\"highlight js\"><figcaption><span>test.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Mock</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mockjs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> data = <span class=\"title class_\">Mock</span>.<span class=\"title function_\">mock</span>(&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;list|5-10&quot;</span>: [</span><br><span class=\"line\">        &#123; <span class=\"string\">&quot;id|+1&quot;</span>: <span class=\"number\">1</span> &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(data);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动服务</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm start</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"MockJs语言规则\"><a href=\"#MockJs语言规则\" class=\"headerlink\" title=\"MockJs语言规则\"></a>MockJs语言规则</h4><p>[官网实例](<span class=\"exturl\" data-url=\"aHR0cDovL21vY2tqcy5jb20vZXhhbXBsZXMuaHRtbA==\">Mock.js (mockjs.com)</span>)</p>\n<h4 id=\"Mockjs服务器\"><a href=\"#Mockjs服务器\" class=\"headerlink\" title=\"Mockjs服务器\"></a>Mockjs服务器</h4><ul>\n<li><p>全局安装mock-server服务器包</p>\n<blockquote>\n<p>npm i @shymean&#x2F;mock-server -g</p>\n</blockquote>\n</li>\n<li><p>编写mock服务</p>\n<figure class=\"highlight js\"><figcaption><span>server.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Mock</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mockjs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Mock</span>.<span class=\"title function_\">mock</span>(<span class=\"string\">&quot;/home&quot;</span>, <span class=\"string\">&#x27;get&#x27;</span>, &#123;</span><br><span class=\"line\">    <span class=\"attr\">code</span>: <span class=\"number\">200</span>,</span><br><span class=\"line\">    <span class=\"attr\">msg</span>: <span class=\"string\">&#x27;访问成功！&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">data</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">user</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"title class_\">Mock</span>.<span class=\"title function_\">mock</span>(<span class=\"string\">&#x27;@cname&#x27;</span>),</span><br><span class=\"line\">            <span class=\"string\">&quot;age|18-60&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;userImage&quot;</span>: <span class=\"title class_\">Mock</span>.<span class=\"property\">Random</span>.<span class=\"title function_\">image</span>(<span class=\"string\">&#x27;200*400&#x27;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用mock命令启动服务器</p>\n<p>端口号范围：1024-65535</p>\n<blockquote>\n<p>mock -p 9999 -f .&#x2F;server.js </p>\n</blockquote>\n</li>\n<li><p>通过浏览器或者接口测试工具postman访问</p>\n<p><img data-src=\"/../../../image/image-20230111162541163.png\" alt=\"image-20230111162541163\"></p>\n</li>\n</ul>\n<h4 id=\"在jQuery中使用mock\"><a href=\"#在jQuery中使用mock\" class=\"headerlink\" title=\"在jQuery中使用mock\"></a>在jQuery中使用mock</h4><figure class=\"highlight plaintext\"><figcaption><span>index.html</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=&quot;en&quot;&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">    &lt;title&gt;在jQuery中使用mock&lt;/title&gt;</span><br><span class=\"line\">    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.3/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/Mock.js/1.0.0/mock-min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;script&gt;</span><br><span class=\"line\">        Mock.mock(&#x27;/user&#x27;, &#x27;get&#x27;, &#123;</span><br><span class=\"line\">            name: &quot;@cname&quot;,</span><br><span class=\"line\">            createTime: &quot;@datetime&quot;,</span><br><span class=\"line\">            email: &quot;@email&quot;,</span><br><span class=\"line\">            username: &quot;@title&quot;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">    &lt;script&gt;</span><br><span class=\"line\">        $.ajax(&#123;</span><br><span class=\"line\">            url: &#x27;/user&#x27;,</span><br><span class=\"line\">            dataType: &#x27;json&#x27;,</span><br><span class=\"line\">            method: &#x27;get&#x27;,</span><br><span class=\"line\">            success: (res) =&gt; &#123;</span><br><span class=\"line\">                console.log(res);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在Vue中使用mock\"><a href=\"#在Vue中使用mock\" class=\"headerlink\" title=\"在Vue中使用mock\"></a>在Vue中使用mock</h4><ul>\n<li><p>目录结构</p>\n<p><img data-src=\"/../../../image/image-20230111181031062.png\" alt=\"image-20230111181031062\"></p>\n</li>\n<li><p>创建项目</p>\n<figure class=\"highlight js\"><figcaption><span>npm</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vue create vue-mock</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>下载依赖</p>\n<ul>\n<li><p>mockjs</p>\n</li>\n<li><p>json5</p>\n<blockquote>\n<p>json格式数据，可以写注释，属性名可以不用引号</p>\n</blockquote>\n</li>\n<li><p>axios</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><figcaption><span>npm</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i mockjs --save-dev</span><br><span class=\"line\"></span><br><span class=\"line\">npm i json5 --save-dev</span><br><span class=\"line\"></span><br><span class=\"line\">npm i axios</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>创建mock接口拦截</p>\n<figure class=\"highlight js\"><figcaption><span>src/mock/index.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;fs&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> json5 = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;json5&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Mock</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mockjs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">getJsonFile</span>(<span class=\"params\">filePath</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> json = fs.<span class=\"title function_\">readFileSync</span>(path.<span class=\"title function_\">join</span>(__dirname, filePath), <span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> json5.<span class=\"title function_\">parse</span>(json)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//这是在webpack的5.75.0版本写法，需要传入的devSever内涵app属性</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"keyword\">function</span>(<span class=\"params\">devServer</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!devServer) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&#x27;webpack-dev-server is not defined&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(process.<span class=\"property\">env</span>.<span class=\"property\">Mock</span>) &#123;</span><br><span class=\"line\">        devServer.<span class=\"property\">app</span>.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;/user/userInfo&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123; </span><br><span class=\"line\">            res.<span class=\"title function_\">json</span>(<span class=\"title class_\">Mock</span>.<span class=\"title function_\">mock</span>(<span class=\"title function_\">getJsonFile</span>(<span class=\"string\">&#x27;./data.json5&#x27;</span>)))</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>创建接口返回的数据</p>\n<figure class=\"highlight json\"><figcaption><span>src/mock/data.json5</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      name<span class=\"punctuation\">:</span> <span class=\"string\">&quot;@cname&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      createTime<span class=\"punctuation\">:</span> <span class=\"string\">&quot;@datetime&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      email<span class=\"punctuation\">:</span> <span class=\"string\">&quot;@email&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      username<span class=\"punctuation\">:</span> <span class=\"string\">&quot;@title&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">- 设置项目启动前的中间件监听</span><br><span class=\"line\"></span><br><span class=\"line\">  ```js vue.config.js</span><br><span class=\"line\">  <span class=\"comment\">//webpack的5.75.0版本写法，字段变为了onBeforeSetupMiddleware</span></span><br><span class=\"line\">  module.exports = <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    devServer<span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      onBeforeSetupMiddleware<span class=\"punctuation\">:</span> require(&#x27;./src/mock/index.js&#x27;)</span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>发送请求测试</p>\n<figure class=\"highlight plaintext\"><figcaption><span>src/compontent/HelloWord.vue</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">import axios from &#x27;axios&#x27;;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  name: &#x27;HelloWorld&#x27;,</span><br><span class=\"line\">  setup() &#123;</span><br><span class=\"line\">    axios.get(&#x27;user/userInfo&#x27;).then(res =&gt; &#123;</span><br><span class=\"line\">      console.log(res)</span><br><span class=\"line\">    &#125;).catch(err =&gt; console.log(err))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动&#x2F;重启项目</p>\n<figure class=\"highlight js\"><figcaption><span>npm</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run serve</span><br></pre></td></tr></table></figure></li>\n</ul>\n",
            "tags": []
        }
    ]
}